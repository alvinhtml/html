!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Mind=t():e.Mind=t()}(self,(function(){return(()=>{var e={357:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(645),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,"body{font-family:-apple-system, sans-serif}.node-adder{position:absolute;box-sizing:border-box;z-index:998}.node-adder .adder-handle{display:block;position:absolute;width:7px;height:7px;border-radius:5px;border:1px solid #aaa;background-color:#fdda31;cursor:pointer}.node-adder .adder-handle.handle-left{left:-5px;top:50%;margin-top:-5px}.node-adder .adder-handle.handle-top{top:-5px;left:50%;margin-left:-5px}.node-adder .adder-handle.handle-right{right:-5px;top:50%;margin-top:-5px}.node-adder .adder-handle.handle-bottom{bottom:-5px;left:50%;margin-left:-5px}.node-adder .adder-handle:hover::after{content:attr(data-title);position:absolute;bottom:10px;left:-50px;background-color:rgba(0,0,0,0.5);padding:.5em 1em;color:#fff;font-size:12px;white-space:nowrap;border-radius:4px;z-index:99}.node-editer{position:absolute;box-sizing:border-box;z-index:999;display:flex;justify-content:center;align-items:center}.node-editer input{background:#fff;border:0;width:100%;text-align:center;line-height:28px}.js-mind-dialog{display:block;position:fixed;top:100px;bottom:100px;left:100px;right:100px;text-align:left;background-color:#FFFFFF;border:0;border-radius:5px;box-shadow:0 0 40px rgba(0,0,0,0.2);z-index:999;-webkit-animation:0.3s modal-animate ease-out 1 forwards;animation:0.3s modal-animate ease-out 1 forwards}.js-mind-dialog .mind-dialog-header{box-sizing:border-box;margin:0;width:100%;padding:16px 32px;font-size:16px;line-height:18px;font-weight:bold;border-radius:5px;display:flex;justify-content:space-between}.js-mind-dialog .mind-dialog-header .mind-dialog-close{cursor:pointer;z-index:1;font-size:14px;margin-top:10px;font-family:inherit;display:block;width:20px;height:20px;font-size:24px;line-height:18px;text-align:center;color:#000;transition:all .3s ease-out}.js-mind-dialog .mind-dialog-header .mind-dialog-close:hover{transform:rotate(180deg)}.js-mind-dialog .mind-dialog-body{width:100%;height:480px;padding:20px;overflow-y:auto;background-color:#F4F4F4;box-sizing:border-box}.toolbar{position:fixed;left:50%;top:0;display:flex;justify-content:center;z-index:9;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.toolbar ul{border:1px #ddd solid;border-top:0;border-bottom-right-radius:5px;border-bottom-left-radius:5px;list-style:none;display:flex;padding:0 18px}.toolbar ul li{height:36px;width:36px;text-align:center;line-height:36px;display:flex;justify-content:center;align-items:center;position:relative}.toolbar ul li.tool-item.active svg path,.toolbar ul li.tool-item:hover svg path{fill:#888}.toolbar ul li.tool-item.enabled svg path{fill:#888}.toolbar ul li svg{z-index:0}.toolbar ul li svg path{fill:#ddd}.toolbar ul li.item-btn:active{opacity:0.8}.toolbar ul li.item-btn:hover{cursor:pointer}.toolbar ul li.item-btn:hover svg path{fill:#3982fc}.toolbar ul li.tool-item:hover::after,.toolbar ul li.tool-item:hover .help-info{position:absolute;display:inline-block;top:110%;left:0;background-color:rgba(0,0,0,0.5);padding:0 1em;color:#fff;font-size:12px;white-space:nowrap;border-radius:4px}.toolbar ul li.tool-item:hover::after{content:attr(data-title)}.toolbar ul li.tool-item .help-info{display:none;line-height:1.5;padding:1em !important;text-align:left}.toolbar ul li.tool-item .help-info dt{font-weight:bold}.toolbar ul li.opened .pick-color,.toolbar ul li.opened .setter{display:block}.toolbar ul .zoom-texter{font-size:12px;padding:0 .5em}.toolbar ul .pick-color,.toolbar ul .setter{display:none;position:absolute;top:100%;left:0;padding:5px}.toolbar ul .pick-color div,.toolbar ul .setter div{display:flex;border:1px solid #ddd;border-radius:4px;background-color:#fff;padding:6px;min-width:240px}.toolbar ul .pick-color div p,.toolbar ul .setter div p{padding-left:10px;text-align:left}.toolbar ul .pick-color div label,.toolbar ul .setter div label{font-size:12px;white-space:nowrap}.toolbar ul .pick-color div label input,.toolbar ul .setter div label input{vertical-align:middle}.toolbar ul .pick-color div span,.toolbar ul .setter div span{display:block;width:16px;height:16px;margin:1px;border-radius:3px}\n",""]);const r=o},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,i){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(i)for(var r=0;r<this.length;r++){var a=this[r][0];null!=a&&(o[a]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);i&&o[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},696:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertChangesToDMP=function(e){for(var t,n,i=[],o=0;o<e.length;o++)n=(t=e[o]).added?1:t.removed?-1:0,i.push([n,t.value]);return i}},826:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertChangesToXML=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];i.added?t.push("<ins>"):i.removed&&t.push("<del>"),t.push((o=i.value,void 0,o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"))),i.added?t.push("</ins>"):i.removed&&t.push("</del>")}var o;return t.join("")}},976:(e,t,n)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.diffArrays=function(e,t,n){return o.diff(e,t,n)},t.arrayDiff=void 0;var o=new(((i=n(913))&&i.__esModule?i:{default:i}).default);t.arrayDiff=o,o.tokenize=function(e){return e.slice()},o.join=o.removeEmpty=function(e){return e}},913:(e,t)=>{"use strict";function n(){}function i(e,t,n,i,o){for(var r=0,a=t.length,s=0,l=0;r<a;r++){var d=t[r];if(d.removed){if(d.value=e.join(i.slice(l,l+d.count)),l+=d.count,r&&t[r-1].added){var c=t[r-1];t[r-1]=t[r],t[r]=c}}else{if(!d.added&&o){var u=n.slice(s,s+d.count);u=u.map((function(e,t){var n=i[l+t];return n.length>e.length?n:e})),d.value=e.join(u)}else d.value=e.join(n.slice(s,s+d.count));s+=d.count,d.added||(l+=d.count)}}var h=t[a-1];return a>1&&"string"==typeof h.value&&(h.added||h.removed)&&e.equals("",h.value)&&(t[a-2].value+=h.value,t.pop()),t}function o(e){return{newPos:e.newPos,components:e.components.slice(0)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.prototype={diff:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.callback;"function"==typeof n&&(r=n,n={}),this.options=n;var a=this;function s(e){return r?(setTimeout((function(){r(void 0,e)}),0),!0):e}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e));var l=(t=this.removeEmpty(this.tokenize(t))).length,d=e.length,c=1,u=l+d,h=[{newPos:-1,components:[]}],p=this.extractCommon(h[0],t,e,0);if(h[0].newPos+1>=l&&p+1>=d)return s([{value:this.join(t),count:t.length}]);function f(){for(var n=-1*c;n<=c;n+=2){var r=void 0,u=h[n-1],p=h[n+1],f=(p?p.newPos:0)-n;u&&(h[n-1]=void 0);var g=u&&u.newPos+1<l,v=p&&0<=f&&f<d;if(g||v){if(!g||v&&u.newPos<p.newPos?(r=o(p),a.pushComponent(r.components,void 0,!0)):((r=u).newPos++,a.pushComponent(r.components,!0,void 0)),f=a.extractCommon(r,t,e,n),r.newPos+1>=l&&f+1>=d)return s(i(a,r.components,t,e,a.useLongestToken));h[n]=r}else h[n]=void 0}c++}if(r)!function e(){setTimeout((function(){if(c>u)return r();f()||e()}),0)}();else for(;c<=u;){var g=f();if(g)return g}},pushComponent:function(e,t,n){var i=e[e.length-1];i&&i.added===t&&i.removed===n?e[e.length-1]={count:i.count+1,added:t,removed:n}:e.push({count:1,added:t,removed:n})},extractCommon:function(e,t,n,i){for(var o=t.length,r=n.length,a=e.newPos,s=a-i,l=0;a+1<o&&s+1<r&&this.equals(t[a+1],n[s+1]);)a++,s++,l++;return l&&e.components.push({count:l}),e.newPos=a,s},equals:function(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}}},630:(e,t,n)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.diffChars=function(e,t,n){return o.diff(e,t,n)},t.characterDiff=void 0;var o=new(((i=n(913))&&i.__esModule?i:{default:i}).default);t.characterDiff=o},852:(e,t,n)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.diffCss=function(e,t,n){return o.diff(e,t,n)},t.cssDiff=void 0;var o=new(((i=n(913))&&i.__esModule?i:{default:i}).default);t.cssDiff=o,o.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)}},276:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.diffJson=function(e,t,n){return l.diff(e,t,n)},t.canonicalize=d,t.jsonDiff=void 0;var i,o=(i=n(913))&&i.__esModule?i:{default:i},r=n(187);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var s=Object.prototype.toString,l=new o.default;function d(e,t,n,i,o){var r,l;for(t=t||[],n=n||[],i&&(e=i(o,e)),r=0;r<t.length;r+=1)if(t[r]===e)return n[r];if("[object Array]"===s.call(e)){for(t.push(e),l=new Array(e.length),n.push(l),r=0;r<e.length;r+=1)l[r]=d(e[r],t,n,i,o);return t.pop(),n.pop(),l}if(e&&e.toJSON&&(e=e.toJSON()),"object"===a(e)&&null!==e){t.push(e),l={},n.push(l);var c,u=[];for(c in e)e.hasOwnProperty(c)&&u.push(c);for(u.sort(),r=0;r<u.length;r+=1)l[c=u[r]]=d(e[c],t,n,i,c);t.pop(),n.pop()}else l=e;return l}t.jsonDiff=l,l.useLongestToken=!0,l.tokenize=r.lineDiff.tokenize,l.castInput=function(e){var t=this.options,n=t.undefinedReplacement,i=t.stringifyReplacer,o=void 0===i?function(e,t){return void 0===t?n:t}:i;return"string"==typeof e?e:JSON.stringify(d(e,null,null,o),o,"  ")},l.equals=function(e,t){return o.default.prototype.equals.call(l,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))}},187:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.diffLines=function(e,t,n){return a.diff(e,t,n)},t.diffTrimmedLines=function(e,t,n){var i=(0,r.generateOptions)(n,{ignoreWhitespace:!0});return a.diff(e,t,i)},t.lineDiff=void 0;var i,o=(i=n(913))&&i.__esModule?i:{default:i},r=n(9),a=new o.default;t.lineDiff=a,a.tokenize=function(e){var t=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var i=0;i<n.length;i++){var o=n[i];i%2&&!this.options.newlineIsToken?t[t.length-1]+=o:(this.options.ignoreWhitespace&&(o=o.trim()),t.push(o))}return t}},146:(e,t,n)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.diffSentences=function(e,t,n){return o.diff(e,t,n)},t.sentenceDiff=void 0;var o=new(((i=n(913))&&i.__esModule?i:{default:i}).default);t.sentenceDiff=o,o.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)}},303:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.diffWords=function(e,t,n){return n=(0,r.generateOptions)(n,{ignoreWhitespace:!0}),l.diff(e,t,n)},t.diffWordsWithSpace=function(e,t,n){return l.diff(e,t,n)},t.wordDiff=void 0;var i,o=(i=n(913))&&i.__esModule?i:{default:i},r=n(9),a=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,s=/\S/,l=new o.default;t.wordDiff=l,l.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!s.test(e)&&!s.test(t)},l.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&a.test(t[n])&&a.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t}},479:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Diff",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"diffChars",{enumerable:!0,get:function(){return r.diffChars}}),Object.defineProperty(t,"diffWords",{enumerable:!0,get:function(){return a.diffWords}}),Object.defineProperty(t,"diffWordsWithSpace",{enumerable:!0,get:function(){return a.diffWordsWithSpace}}),Object.defineProperty(t,"diffLines",{enumerable:!0,get:function(){return s.diffLines}}),Object.defineProperty(t,"diffTrimmedLines",{enumerable:!0,get:function(){return s.diffTrimmedLines}}),Object.defineProperty(t,"diffSentences",{enumerable:!0,get:function(){return l.diffSentences}}),Object.defineProperty(t,"diffCss",{enumerable:!0,get:function(){return d.diffCss}}),Object.defineProperty(t,"diffJson",{enumerable:!0,get:function(){return c.diffJson}}),Object.defineProperty(t,"canonicalize",{enumerable:!0,get:function(){return c.canonicalize}}),Object.defineProperty(t,"diffArrays",{enumerable:!0,get:function(){return u.diffArrays}}),Object.defineProperty(t,"applyPatch",{enumerable:!0,get:function(){return h.applyPatch}}),Object.defineProperty(t,"applyPatches",{enumerable:!0,get:function(){return h.applyPatches}}),Object.defineProperty(t,"parsePatch",{enumerable:!0,get:function(){return p.parsePatch}}),Object.defineProperty(t,"merge",{enumerable:!0,get:function(){return f.merge}}),Object.defineProperty(t,"structuredPatch",{enumerable:!0,get:function(){return g.structuredPatch}}),Object.defineProperty(t,"createTwoFilesPatch",{enumerable:!0,get:function(){return g.createTwoFilesPatch}}),Object.defineProperty(t,"createPatch",{enumerable:!0,get:function(){return g.createPatch}}),Object.defineProperty(t,"convertChangesToDMP",{enumerable:!0,get:function(){return v.convertChangesToDMP}}),Object.defineProperty(t,"convertChangesToXML",{enumerable:!0,get:function(){return m.convertChangesToXML}});var i,o=(i=n(913))&&i.__esModule?i:{default:i},r=n(630),a=n(303),s=n(187),l=n(146),d=n(852),c=n(276),u=n(976),h=n(690),p=n(719),f=n(51),g=n(286),v=n(696),m=n(826)},690:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyPatch=a,t.applyPatches=function(e,t){"string"==typeof e&&(e=(0,o.parsePatch)(e));var n=0;!function i(){var o=e[n++];if(!o)return t.complete();t.loadFile(o,(function(e,n){if(e)return t.complete(e);var r=a(n,o,t);t.patched(o,r,(function(e){if(e)return t.complete(e);i()}))}))}()};var i,o=n(719),r=(i=n(169))&&i.__esModule?i:{default:i};function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof t&&(t=(0,o.parsePatch)(t)),Array.isArray(t)){if(t.length>1)throw new Error("applyPatch only works with a single input.");t=t[0]}var i,a,s=e.split(/\r\n|[\n\v\f\r\x85]/),l=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],d=t.hunks,c=n.compareLine||function(e,t,n,i){return t===i},u=0,h=n.fuzzFactor||0,p=0,f=0;function g(e,t){for(var n=0;n<e.lines.length;n++){var i=e.lines[n],o=i.length>0?i[0]:" ",r=i.length>0?i.substr(1):i;if(" "===o||"-"===o){if(!c(t+1,s[t],o,r)&&++u>h)return!1;t++}}return!0}for(var v=0;v<d.length;v++){for(var m=d[v],y=s.length-m.oldLines,b=0,x=f+m.oldStart-1,w=(0,r.default)(x,p,y);void 0!==b;b=w())if(g(m,x+b)){m.offset=f+=b;break}if(void 0===b)return!1;p=m.offset+m.oldStart+m.oldLines}for(var S=0,P=0;P<d.length;P++){var M=d[P],L=M.oldStart+M.offset+S-1;S+=M.newLines-M.oldLines;for(var _=0;_<M.lines.length;_++){var k=M.lines[_],O=k.length>0?k[0]:" ",T=k.length>0?k.substr(1):k,C=M.linedelimiters[_];if(" "===O)L++;else if("-"===O)s.splice(L,1),l.splice(L,1);else if("+"===O)s.splice(L,0,T),l.splice(L,0,C),L++;else if("\\"===O){var E=M.lines[_-1]?M.lines[_-1][0]:null;"+"===E?i=!0:"-"===E&&(a=!0)}}}if(i)for(;!s[s.length-1];)s.pop(),l.pop();else a&&(s.push(""),l.push("\n"));for(var j=0;j<s.length-1;j++)s[j]=s[j]+l[j];return s.join("")}},286:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.structuredPatch=a,t.formatPatch=s,t.createTwoFilesPatch=l,t.createPatch=function(e,t,n,i,o,r){return l(e,e,t,n,i,o,r)};var i=n(187);function o(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function a(e,t,n,r,a,s,l){l||(l={}),void 0===l.context&&(l.context=4);var d=(0,i.diffLines)(n,r,l);function c(e){return e.map((function(e){return" "+e}))}d.push({value:"",lines:[]});for(var u=[],h=0,p=0,f=[],g=1,v=1,m=function(e){var t=d[e],i=t.lines||t.value.replace(/\n$/,"").split("\n");if(t.lines=i,t.added||t.removed){var a;if(!h){var s=d[e-1];h=g,p=v,s&&(f=l.context>0?c(s.lines.slice(-l.context)):[],h-=f.length,p-=f.length)}(a=f).push.apply(a,o(i.map((function(e){return(t.added?"+":"-")+e})))),t.added?v+=i.length:g+=i.length}else{if(h)if(i.length<=2*l.context&&e<d.length-2){var m;(m=f).push.apply(m,o(c(i)))}else{var y,b=Math.min(i.length,l.context);(y=f).push.apply(y,o(c(i.slice(0,b))));var x={oldStart:h,oldLines:g-h+b,newStart:p,newLines:v-p+b,lines:f};if(e>=d.length-2&&i.length<=l.context){var w=/\n$/.test(n),S=/\n$/.test(r),P=0==i.length&&f.length>x.oldLines;!w&&P&&n.length>0&&f.splice(x.oldLines,0,"\\ No newline at end of file"),(w||P)&&S||f.push("\\ No newline at end of file")}u.push(x),h=0,p=0,f=[]}g+=i.length,v+=i.length}},y=0;y<d.length;y++)m(y);return{oldFileName:e,newFileName:t,oldHeader:a,newHeader:s,hunks:u}}function s(e){var t=[];e.oldFileName==e.newFileName&&t.push("Index: "+e.oldFileName),t.push("==================================================================="),t.push("--- "+e.oldFileName+(void 0===e.oldHeader?"":"\t"+e.oldHeader)),t.push("+++ "+e.newFileName+(void 0===e.newHeader?"":"\t"+e.newHeader));for(var n=0;n<e.hunks.length;n++){var i=e.hunks[n];0===i.oldLines&&(i.oldStart-=1),0===i.newLines&&(i.newStart-=1),t.push("@@ -"+i.oldStart+","+i.oldLines+" +"+i.newStart+","+i.newLines+" @@"),t.push.apply(t,i.lines)}return t.join("\n")+"\n"}function l(e,t,n,i,o,r,l){return s(a(e,t,n,i,o,r,l))}},51:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcLineCount=l,t.merge=function(e,t,n){e=d(e,n),t=d(t,n);var i={};(e.index||t.index)&&(i.index=e.index||t.index),(e.newFileName||t.newFileName)&&(c(e)?c(t)?(i.oldFileName=u(i,e.oldFileName,t.oldFileName),i.newFileName=u(i,e.newFileName,t.newFileName),i.oldHeader=u(i,e.oldHeader,t.oldHeader),i.newHeader=u(i,e.newHeader,t.newHeader)):(i.oldFileName=e.oldFileName,i.newFileName=e.newFileName,i.oldHeader=e.oldHeader,i.newHeader=e.newHeader):(i.oldFileName=t.oldFileName||e.oldFileName,i.newFileName=t.newFileName||e.newFileName,i.oldHeader=t.oldHeader||e.oldHeader,i.newHeader=t.newHeader||e.newHeader)),i.hunks=[];for(var o=0,r=0,a=0,s=0;o<e.hunks.length||r<t.hunks.length;){var l=e.hunks[o]||{oldStart:1/0},g=t.hunks[r]||{oldStart:1/0};if(h(l,g))i.hunks.push(p(l,a)),o++,s+=l.newLines-l.oldLines;else if(h(g,l))i.hunks.push(p(g,s)),r++,a+=g.newLines-g.oldLines;else{var v={oldStart:Math.min(l.oldStart,g.oldStart),oldLines:0,newStart:Math.min(l.newStart+a,g.oldStart+s),newLines:0,lines:[]};f(v,l.oldStart,l.lines,g.oldStart,g.lines),r++,o++,i.hunks.push(v)}}return i};var i=n(286),o=n(719),r=n(780);function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function l(e){var t=P(e.lines),n=t.oldLines,i=t.newLines;void 0!==n?e.oldLines=n:delete e.oldLines,void 0!==i?e.newLines=i:delete e.newLines}function d(e,t){if("string"==typeof e){if(/^@@/m.test(e)||/^Index:/m.test(e))return(0,o.parsePatch)(e)[0];if(!t)throw new Error("Must provide a base reference or pass in a patch");return(0,i.structuredPatch)(void 0,void 0,t,e)}return e}function c(e){return e.newFileName&&e.newFileName!==e.oldFileName}function u(e,t,n){return t===n?t:(e.conflict=!0,{mine:t,theirs:n})}function h(e,t){return e.oldStart<t.oldStart&&e.oldStart+e.oldLines<t.oldStart}function p(e,t){return{oldStart:e.oldStart,oldLines:e.oldLines,newStart:e.newStart+t,newLines:e.newLines,lines:e.lines}}function f(e,t,n,i,o){var r={offset:t,lines:n,index:0},s={offset:i,lines:o,index:0};for(y(e,r,s),y(e,s,r);r.index<r.lines.length&&s.index<s.lines.length;){var d=r.lines[r.index],c=s.lines[s.index];if("-"!==d[0]&&"+"!==d[0]||"-"!==c[0]&&"+"!==c[0])if("+"===d[0]&&" "===c[0]){var u;(u=e.lines).push.apply(u,a(x(r)))}else if("+"===c[0]&&" "===d[0]){var h;(h=e.lines).push.apply(h,a(x(s)))}else"-"===d[0]&&" "===c[0]?v(e,r,s):"-"===c[0]&&" "===d[0]?v(e,s,r,!0):d===c?(e.lines.push(d),r.index++,s.index++):m(e,x(r),x(s));else g(e,r,s)}b(e,r),b(e,s),l(e)}function g(e,t,n){var i=x(t),o=x(n);if(w(i)&&w(o)){var s,l;if((0,r.arrayStartsWith)(i,o)&&S(n,i,i.length-o.length))return void(s=e.lines).push.apply(s,a(i));if((0,r.arrayStartsWith)(o,i)&&S(t,o,o.length-i.length))return void(l=e.lines).push.apply(l,a(o))}else if((0,r.arrayEqual)(i,o)){var d;return void(d=e.lines).push.apply(d,a(i))}m(e,i,o)}function v(e,t,n,i){var o,r=x(t),s=function(e,t){for(var n=[],i=[],o=0,r=!1,a=!1;o<t.length&&e.index<e.lines.length;){var s=e.lines[e.index],l=t[o];if("+"===l[0])break;if(r=r||" "!==s[0],i.push(l),o++,"+"===s[0])for(a=!0;"+"===s[0];)n.push(s),s=e.lines[++e.index];l.substr(1)===s.substr(1)?(n.push(s),e.index++):a=!0}if("+"===(t[o]||"")[0]&&r&&(a=!0),a)return n;for(;o<t.length;)i.push(t[o++]);return{merged:i,changes:n}}(n,r);s.merged?(o=e.lines).push.apply(o,a(s.merged)):m(e,i?s:r,i?r:s)}function m(e,t,n){e.conflict=!0,e.lines.push({conflict:!0,mine:t,theirs:n})}function y(e,t,n){for(;t.offset<n.offset&&t.index<t.lines.length;){var i=t.lines[t.index++];e.lines.push(i),t.offset++}}function b(e,t){for(;t.index<t.lines.length;){var n=t.lines[t.index++];e.lines.push(n)}}function x(e){for(var t=[],n=e.lines[e.index][0];e.index<e.lines.length;){var i=e.lines[e.index];if("-"===n&&"+"===i[0]&&(n="+"),n!==i[0])break;t.push(i),e.index++}return t}function w(e){return e.reduce((function(e,t){return e&&"-"===t[0]}),!0)}function S(e,t,n){for(var i=0;i<n;i++){var o=t[t.length-n+i].substr(1);if(e.lines[e.index+i]!==" "+o)return!1}return e.index+=n,!0}function P(e){var t=0,n=0;return e.forEach((function(e){if("string"!=typeof e){var i=P(e.mine),o=P(e.theirs);void 0!==t&&(i.oldLines===o.oldLines?t+=i.oldLines:t=void 0),void 0!==n&&(i.newLines===o.newLines?n+=i.newLines:n=void 0)}else void 0===n||"+"!==e[0]&&" "!==e[0]||n++,void 0===t||"-"!==e[0]&&" "!==e[0]||t++})),{oldLines:t,newLines:n}}},719:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePatch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.split(/\r\n|[\n\v\f\r\x85]/),i=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],o=[],r=0;function a(){var e={};for(o.push(e);r<n.length;){var i=n[r];if(/^(\-\-\-|\+\+\+|@@)\s/.test(i))break;var a=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(i);a&&(e.index=a[1]),r++}for(s(e),s(e),e.hunks=[];r<n.length;){var d=n[r];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(d))break;if(/^@@/.test(d))e.hunks.push(l());else{if(d&&t.strict)throw new Error("Unknown line "+(r+1)+" "+JSON.stringify(d));r++}}}function s(e){var t=/^(---|\+\+\+)\s+(.*)$/.exec(n[r]);if(t){var i="---"===t[1]?"old":"new",o=t[2].split("\t",2),a=o[0].replace(/\\\\/g,"\\");/^".*"$/.test(a)&&(a=a.substr(1,a.length-2)),e[i+"FileName"]=a,e[i+"Header"]=(o[1]||"").trim(),r++}}function l(){var e=r,o=n[r++].split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),a={oldStart:+o[1],oldLines:void 0===o[2]?1:+o[2],newStart:+o[3],newLines:void 0===o[4]?1:+o[4],lines:[],linedelimiters:[]};0===a.oldLines&&(a.oldStart+=1),0===a.newLines&&(a.newStart+=1);for(var s=0,l=0;r<n.length&&!(0===n[r].indexOf("--- ")&&r+2<n.length&&0===n[r+1].indexOf("+++ ")&&0===n[r+2].indexOf("@@"));r++){var d=0==n[r].length&&r!=n.length-1?" ":n[r][0];if("+"!==d&&"-"!==d&&" "!==d&&"\\"!==d)break;a.lines.push(n[r]),a.linedelimiters.push(i[r]||"\n"),"+"===d?s++:"-"===d?l++:" "===d&&(s++,l++)}if(s||1!==a.newLines||(a.newLines=0),l||1!==a.oldLines||(a.oldLines=0),t.strict){if(s!==a.newLines)throw new Error("Added line count did not match for hunk at line "+(e+1));if(l!==a.oldLines)throw new Error("Removed line count did not match for hunk at line "+(e+1))}return a}for(;r<n.length;)a();return o}},780:(e,t)=>{"use strict";function n(e,t){if(t.length>e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.arrayEqual=function(e,t){return e.length===t.length&&n(e,t)},t.arrayStartsWith=n},169:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var i=!0,o=!1,r=!1,a=1;return function s(){if(i&&!r){if(o?a++:i=!1,e+a<=n)return a;r=!0}if(!o)return r||(i=!0),t<=e-a?-a++:(o=!0,s())}}},9:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateOptions=function(e,t){if("function"==typeof e)t.callback=e;else if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}},283:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var i=n(379),o=n.n(i),r=n(795),a=n.n(r),s=n(569),l=n.n(s),d=n(565),c=n.n(d),u=n(216),h=n.n(u),p=n(589),f=n.n(p),g=n(357),v={};v.styleTagTransform=f(),v.setAttributes=c(),v.insert=l().bind(null,"head"),v.domAPI=a(),v.insertStyleElement=h(),o()(g.Z,v);const m=g.Z&&g.Z.locals?g.Z.locals:void 0},379:e=>{"use strict";var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var r={},a=[],s=0;s<e.length;s++){var l=e[s],d=i.base?l[0]+i.base:l[0],c=r[d]||0,u="".concat(d," ").concat(c);r[d]=c+1;var h=n(u),p={css:l[1],media:l[2],sourceMap:l[3]};-1!==h?(t[h].references++,t[h].updater(p)):t.push({identifier:u,updater:o(p,i),references:1}),a.push(u)}return a}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var r=i(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<r.length;a++){var s=n(r[a]);t[s].references--}for(var l=i(e,o),d=0;d<r.length;d++){var c=n(r[d]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}r=l}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t),t}},565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i=n.css,o=n.media,r=n.sourceMap;o?e.setAttribute("media",o):e.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(i,e)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},658:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MOUSEWHEEL=t.MOUSEUP=t.MOUSEOUT=t.MOUSEMOVE=t.MOUSEDOWN=t.CLICK=void 0,t.CLICK=Symbol("click"),t.MOUSEDOWN=Symbol("mousedown"),t.MOUSEMOVE=Symbol("mousemove"),t.MOUSEOUT=Symbol("mouseout"),t.MOUSEUP=Symbol("mouseup"),t.MOUSEWHEEL=Symbol("mousewheel")},675:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){var n=this;this.node=e,this.editer=t,["left","top","right","bottom"].forEach((function(t){var i=document.createElement("div");i.setAttribute("data-title","点击添加子节点"),i.classList.add("adder-handle","handle-"+t),i.onclick=function(){n.callback(t)},e.appendChild(i)}));var i=document.createElement("input");t.appendChild(i),i.onkeydown=function(e){e.stopPropagation()},i.onmousedown=function(e){e.stopPropagation()},this.node.ondblclick=function(){n.editer.style.display="flex",i.focus(),n.editCallback(i)}}return e.prototype.show=function(e,t,n,i){this.node.style.left=e-n/2+"px",this.node.style.top=t-i/2+"px",this.node.style.width=n+"px",this.node.style.height=i+"px",this.node.style.display="block",this.editer.style.left=e-n/2+3+"px",this.editer.style.top=t-i/2+3+"px",this.editer.style.width=n-6+"px",this.editer.style.height=i-6+"px"},e.prototype.hide=function(){this.node.style.display="none",this.editer.style.display="none"},e.prototype.onAdd=function(e){this.callback=e},e.prototype.onEdit=function(e){this.editCallback=e},e.init=function(t){var n=document.createElement("div");n.style.display="none",n.classList.add("node-adder"),t.appendChild(n);var i=document.createElement("div");return i.style.display="none",i.classList.add("node-editer"),t.appendChild(i),new e(n,i)},e}();t.default=n},123:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){this.eventType=e,this.callback=t}},72:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Mind=void 0;var o=i(n(471)),r=i(n(675)),a=i(n(104)),s=i(n(583)),l=n(402),d=function(){function e(e){this.id="mind",this.nodes=[],this.recoverAnimateList=[],this.data=[],this.nodeTree=[],this.rect={width:100,height:100},e&&(this.id=e.id||"mind",this.stage2d=new o.default(e))}return e.prototype.parseData=function(e,t){var n=function(e,t){for(var i,o=0;o<e.length;o++){var r=e[o];r.children&&(Array.isArray(r.children)?r.children=((i={})[t]=n(r.children,t),i):(r.children.top&&(r.children.top=n(r.children.top,"top")),r.children.right&&(r.children.right=n(r.children.right,"right")),r.children.bottom&&(r.children.bottom=n(r.children.bottom,"bottom")),r.children.left&&(r.children.left=n(r.children.left,"left"))))}return e};return n(e,t)},e.prototype.initOption=function(e){this.option={type:e.type||"mind",orient:e.orient||"horizontal",spaceWidth:e.spaceWidth||150,spaceHeight:e.spaceHeight||120,lineSpace:e.lineSpace||3,nodeWidth:e.nodeWidth||100,nodeHeight:e.nodeHeight||38}},e.prototype.init=function(e,t){var n=this;this.initOption(t||{}),this.initToolbar(),this.initAdder();var i=localStorage.getItem(this.id+"-data");i?this.data=JSON.parse(i):(this.data=this.parseData(e,"vertical"===this.option.orient?"bottom":"left"),localStorage.setItem(this.id+"-data",JSON.stringify(this.data))),this.initNode(this.data),this.stage2d.addEventListener("click",(function(e){e.target?(n.selected=e.target,n.toolbar.enableDeleteNode(),e.target.actived=!0,n.adder.show(e.target.x*n.stage2d.scale+n.stage2d.translateX,e.target.y*n.stage2d.scale+n.stage2d.translateY,e.target.width*n.stage2d.scale,e.target.height*n.stage2d.scale)):(n.selected=null,n.toolbar&&n.toolbar.disableDeleteNode(),n.adder.hide())}));var o=0,r=0;this.stage2d.addEventListener("mousedown",(function(e){e.target&&(n.dragged=e.target,n.stage2d.container.style.cursor="grab",o=e.mouseX,r=e.mouseY)})),this.stage2d.addEventListener("mouseup",(function(e){n.dragged=null,n.stage2d.container.style.cursor="auto"})),this.stage2d.addEventListener("mousemove",(function(e){n.dragged&&(n.dragged.x=n.dragged.x+(e.mouseX-o)/n.stage2d.scale,n.dragged.y=n.dragged.y+(e.mouseY-r)/n.stage2d.scale),o=e.mouseX,r=e.mouseY})),this.stage2d.addEventListener("mousewheel",(function(e){n.selected&&(n.selected=null,n.toolbar&&n.toolbar.disableDeleteNode(),n.adder.hide())})),this.render()},e.prototype.initToolbar=function(){var e=this,t=s.default.init(this.stage2d.container,this.option);t.onClick((function(n){switch(n.type){case"clear":e.clearNode();break;case"zoom-in":e.setZoom(!1,t);break;case"zoom-out":e.setZoom(!0,t);break;case"save-to-image":e.saveImage();break;case"copy-json":e.saveJson();break;case"delete":e.selected&&(e.deleteNode(e.selected),e.adder.hide(),e.toolbar.disableDeleteNode());break;case"undo":e.undo();break;case"redo":e.redo();break;case"circle":case"rect":case"diamond":e.changeNodeType(n.type)}})),t.onDrag((function(t){e.dragged||(e.data.push({title:"new node",type:t}),e.resetAndCache(),e.dragged=e.nodeTree[e.nodeTree.length-1].node,e.stage2d.container.style.cursor="grab",e.dragged&&(e.dragged.x=e.stage2d.mouseX/e.stage2d.pixelRatio-e.stage2d.translateX,e.dragged.y=e.stage2d.mouseY/e.stage2d.pixelRatio-e.stage2d.translateY))})),t.onDragend((function(){e.dragged&&(e.dragged=null,e.stage2d.container.style.cursor="auto")})),t.setZoomText(Math.round(100*this.stage2d.scale)),t.onFill((function(t){e.selected&&e.setColor(e.selected,t)})),t.onChange((function(t){e.option.spaceWidth=t.spaceWidth,e.option.spaceHeight=t.spaceHeight,e.resetAndCache()})),this.toolbar=t},e.prototype.createNode=function(e,t,n){var i;switch(e){case"circle":(i=new l.Circle).width=t.width?t.width:.8*this.option.nodeWidth,i.height=t.width?t.width:.8*this.option.nodeWidth;break;case"diamond":(i=new l.Diamond).width=t.width?t.width:1.2*this.option.nodeWidth,i.height=t.height?t.height:1.2*this.option.nodeHeight;break;case"text":i=new l.Text,t.children?i.textAlign="center":(i.textAlign="left"===n?"right":"left",i.width=1,i.height=1);break;default:(i=new l.Rect).width=t.width?t.width:this.option.nodeWidth,i.height=t.height?t.height:this.option.nodeHeight}return i.name=t.title,i.orient=n,i.stage2d=this.stage2d,t.color&&i.initColor(t.color),i.datahandle=t,i},e.prototype.initNode=function(e){this.nodes=[],this.nodeTree=this.parse(e,null,"bottom")},e.prototype.parse=function(e,t,n){if(!e||e.length<=0)return[];for(var i=[],o=0;o<e.length;o++){var r,a=e[o];r="tree"===this.option.type?a.type?a.type:"text":a.type?a.type:"rect";var s=this.createNode(r,a,n);this.nodes.push(s),t&&s.links.push({orient:n,node:t});var l=void 0,d=void 0,c=void 0,u=void 0;a.children&&(l=this.parse(a.children.top,s,"top"),d=this.parse(a.children.right,s,"right"),c=this.parse(a.children.bottom,s,"bottom"),u=this.parse(a.children.left,s,"left"));var h={node:s,spaceWidth:0,spaceHeight:0};(u||d||l||c)&&Object.defineProperty(h,"children",{enumerable:!0,writable:!0,configurable:!0,value:{top:l,right:d,bottom:c,left:u}}),i.push(h)}return i},e.prototype.initPosition=function(e){console.time("init position time");var t=this.option.spaceWidth,n=this.option.spaceHeight,i=function(e,o){for(var r=0,a=0,s=0;s<e.length;s++){var l=e[s];if(l.spaceWidth=Math.max(t,l.node.width),l.spaceHeight=n,l.children){var d=i(l.children.top,!0),c=i(l.children.right,!1),u=i(l.children.bottom,!0),h=i(l.children.left,!1);l.spaceWidth+=Math.max(h.width+c.width,d.width-t,u.width-t),l.spaceHeight+=Math.max(d.height+u.height,h.height-n,c.height-n)}o?(r+=l.spaceWidth,a=Math.max(l.spaceHeight,a)):(r=Math.max(l.spaceWidth,r),a+=l.spaceHeight)}return{width:r,height:a}};this.rect=i(this.nodeTree,!0),0===this.stage2d.translateX&&0===this.stage2d.translateY&&this.stage2d.initTranslate(this.rect.width,this.rect.height);var o=function(i,r,a,s){for(var l=r,d=a,c=0,u=0,h=0;h<i.length;h++){var p=i[h];if(s?(c=l+p.spaceWidth/2,u=d):(c=l,u=d+p.spaceHeight/2),p.children){var f=p.children.top.reduce((function(e,t){return e+t.spaceWidth}),0),g=p.children.bottom.reduce((function(e,t){return e+t.spaceWidth}),0),v=p.children.left.reduce((function(e,t){return Math.max(e,t.spaceWidth)}),0),m=p.children.left.reduce((function(e,t){return e+t.spaceHeight}),0),y=p.children.right.reduce((function(e,t){return e+t.spaceHeight}),0);v>0&&s&&(c=l+v+t/2),o(p.children.top,c-f/2,u-n,!0),o(p.children.right,c+t,u-y/2,!1),o(p.children.bottom,c-g/2,u+n,!0),o(p.children.left,c-t,u-m/2,!1)}e?p.node.animate({x:c,y:u}):(p.node.x=c,p.node.y=u),s?l+=p.spaceWidth:d+=p.spaceHeight}};o(this.nodeTree,0,0,!0),console.timeEnd("init position time")},e.prototype.addNode=function(e,t,n){e.datahandle.children||(e.datahandle.children={}),e.datahandle.children[t]||(e.datahandle.children[t]=[]),e.datahandle.children[t].push(n),this.resetAndCache()},e.prototype.editNode=function(e,t){e.datahandle.title=t,this.resetAndCache()},e.prototype.changeNodeType=function(e){this.selected&&(this.selected.datahandle.type=e,this.resetAndCache())},e.prototype.setColor=function(e,t){e.datahandle.color=t,this.resetAndCache()},e.prototype.deleteNode=function(e){e.datahandle.deleted=!0,this.resetAndCache()},e.prototype.undo=function(){var e=localStorage.getItem(this.id+"-data")||"",t=a.default.undo(e),n=JSON.parse(t);this.data=n,this.initNode(this.updateData()),this.initPosition(!1),localStorage.setItem(this.id+"-data",t)},e.prototype.redo=function(){var e=localStorage.getItem(this.id+"-data")||"",t=a.default.redo(e),n=JSON.parse(t);this.data=n,this.initNode(this.updateData()),this.initPosition(!1),localStorage.setItem(this.id+"-data",t)},e.prototype.resetAndCache=function(){this.selected=null,this.toolbar.disableDeleteNode(),this.adder.hide(),this.initNode(this.updateData()),this.initPosition(!1);var e=localStorage.getItem(this.id+"-data")||"",t=JSON.stringify(this.data);a.default.recordDiff(e,t),localStorage.setItem(this.id+"-data",t)},e.prototype.clearNode=function(){window.confirm("你确定要清除已缓存的节点吗？")&&(localStorage.removeItem(this.id+"-translateX"),localStorage.removeItem(this.id+"-translateY"),localStorage.removeItem(this.id+"-data"),window.location.reload())},e.prototype.setZoom=function(e,t){e?this.stage2d.setScale(this.stage2d.scale-.05):this.stage2d.setScale(this.stage2d.scale+.05),t.setZoomText(Math.round(100*this.stage2d.scale))},e.prototype.saveImage=function(){if(this.stage2d.scenes[0].canvas){var e=document.createElement("canvas");e.width=this.rect.width+200,e.height=this.rect.height+200;var t=e.getContext("2d");if(t){t.strokeStyle="#ffffff",t.lineJoin="bevel",t.lineCap="round",t.miterLimit=1,t.textAlign="center",t.textBaseline="middle",t.fillStyle="#ffffff";var n=this.nodes.reduce((function(e,t){return Math.min(e,t.x)}),0),i=this.nodes.reduce((function(e,t){return Math.min(e,t.y)}),0);t.translate(100-n,100-i),this.paint(t);var o=e.toDataURL("image/png"),r=document.createElement("a");r.setAttribute("href",o),r.setAttribute("download",this.id+".png"),r.setAttribute("target","_blank");var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!0),r.dispatchEvent(a)}}},e.prototype.saveJson=function(){var e=this.toJsonString(),t=document.createElement("div");t.classList.add("js-mind-dialog"),t.innerHTML='\n      <div class="mind-dialog-header">\n        <h3>Json Data</h3>\n        <div class="mind-dialog-close">×</div>\n      </div>\n      <div class="mind-dialog-body"><pre>'+e+"</pre></div>\n    ",document.body.appendChild(t);var n=t.querySelector(".mind-dialog-close");n&&(n.onclick=function(){document.body.removeChild(t)})},e.prototype.render=function(){var e=this,t=this.stage2d.getScene();t.initContext(),this.nodes.forEach((function(e){"text"===e.type&&"center"===e.textAlign&&(e.width=Math.min(400,Math.max(t.context.measureText(e.name).width)))})),this.initPosition(!0),t.paint((function(){e.paint(t.context)}))},e.prototype.paint=function(e){var t=this,n="mind"===this.option.type?this.paintBrokenLine:this.paintLine;e.beginPath(),e.moveTo(0,0),this.nodes.forEach((function(i){i.links.length>0&&i.links.forEach((function(o){n.call(t,e,o.orient,o.node,i)}))})),e.moveTo(0,0),e.closePath(),e.strokeStyle="#7396bf",e.stroke(),e.lineWidth=2,this.nodes.forEach((function(t){t.paint(e)})),e.fillStyle="#333",this.nodes.forEach((function(t){t.paintTitle(e)}))},e.prototype.paintLine=function(e,t,n,i){var o=this.option.lineSpace;if("bottom"===t){var r=n.x,a=n.y+n.height/2+o,s=i.x,l=i.y-i.height/2-o;e.moveTo(r,a),e.bezierCurveTo(r,a+(l-a)/2,s,l-(l-a)/2,s,l)}"top"===t&&(r=n.x,a=n.y-n.height/2-o,s=i.x,l=i.y+i.height/2+o,e.moveTo(r,a),e.bezierCurveTo(r,a+(l-a)/2,s,l-(l-a)/2,s,l)),"right"===t&&(r=n.x+n.width/2+o,a=n.y,s=i.x-i.width/2-o,l=i.y,e.moveTo(r,a),e.bezierCurveTo(r+(s-r)/2,a,s-(s-r)/2,l,s,l)),"left"===t&&(r=n.x-n.width/2-o,a=n.y,s=i.x+i.width/2+o,l=i.y,e.moveTo(r,a),e.bezierCurveTo(r+(s-r)/2,a,s-(s-r)/2,l,s,l))},e.prototype.paintBrokenLine=function(e,t,n,i){var o=this.option.lineSpace;if("bottom"===t){var r=n.x,a=n.y+n.height/2+o,s=i.x,l=i.y-i.height/2-o;e.moveTo(r,a),e.lineTo(r,a+(l-a)/2),e.lineTo(s,a+(l-a)/2),e.lineTo(s,l)}"top"===t&&(r=n.x,a=n.y-n.height/2-o,s=i.x,l=i.y+i.height/2+o,e.moveTo(r,a),e.lineTo(r,a+(l-a)/2),e.lineTo(s,a+(l-a)/2),e.lineTo(s,l)),"right"===t&&(r=n.x+n.width/2+o,a=n.y,s=i.x-i.width/2-o,l=i.y,e.moveTo(r,a),e.lineTo(r+(s-r)/2,a),e.lineTo(r+(s-r)/2,l),e.lineTo(s,l)),"left"===t&&(r=n.x-n.width/2-o,a=n.y,s=i.x+i.width/2+o,l=i.y,e.moveTo(r,a),e.lineTo(r+(s-r)/2,a),e.lineTo(r+(s-r)/2,l),e.lineTo(s,l))},e.prototype.initAdder=function(){var e=this;this.adder=r.default.init(this.stage2d.container),this.adder.onAdd((function(t){e.stage2d.drawing=!1,e.selected&&e.addNode(e.selected,t,{title:"new node",type:e.toolbar.nodeType})})),this.adder.onEdit((function(t){e.selected&&(t.value=e.selected.name,t.onblur=function(){e.selected&&e.editNode(e.selected,t.value)})})),document.addEventListener("keydown",(function(t){46!==t.keyCode&&8!==t.keyCode||e.selected&&(e.deleteNode(e.selected),e.adder.hide())}))},e.prototype.toJsonString=function(){return JSON.stringify(this.data,null,2)},e.prototype.updateData=function(){var e=function(t){return t.filter((function(e){return!e.deleted})).map((function(t){return t.children&&(t.children.top&&(t.children.top=e(t.children.top)),t.children.right&&(t.children.right=e(t.children.right)),t.children.bottom&&(t.children.bottom=e(t.children.bottom)),t.children.left&&(t.children.left=e(t.children.left))),t}))};return this.data=e(this.data),this.data},e.prototype.addEventListener=function(e,t){this.stage2d.addEventListener(e,t)},e}();t.Mind=d},242:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var t=e.call(this)||this;return t.radius=6,t.width=80,t.height=80,t.type="circle",t}return o(t,e),t.prototype.paintTitle=function(e){e.fillText(this.name,this.x,this.y)},t.prototype.paint=function(e){this.x,this.width,this.y,this.height,e.beginPath(),e.arc(this.x,this.y,this.width/2,0,2*Math.PI),e.closePath(),e.isPointInPath(this.stage2d.mouseX,this.stage2d.mouseY)?(e.fillStyle=this.mouseOverPattern,this.triggerEvent()):e.fillStyle=this.pattern,e.fillStyle=this.areaPattern,e.strokeStyle=this.pattern,e.fill(),e.stroke()},t}(r(n(91)).default);t.default=a},889:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var t=e.call(this)||this;return t.radius=6,t.type="diamond",t}return o(t,e),t.prototype.paintTitle=function(e){e.fillText(this.name,this.x,this.y)},t.prototype.paint=function(e){e.beginPath(),e.moveTo(this.x,this.y-this.height/2),e.lineTo(this.x+this.width/2,this.y),e.lineTo(this.x,this.y+this.height/2),e.lineTo(this.x-this.width/2,this.y),e.closePath(),e.isPointInPath(this.stage2d.mouseX,this.stage2d.mouseY)?(e.fillStyle=this.mouseOverPattern,this.triggerEvent()):e.fillStyle=this.pattern,e.fillStyle=this.areaPattern,e.strokeStyle=this.pattern,e.fill(),e.stroke()},t}(r(n(91)).default);t.default=a},402:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Diamond=t.Circle=t.Rect=t.Text=void 0;var o=i(n(986));t.Text=o.default;var r=i(n(567));t.Rect=r.default;var a=i(n(242));t.Circle=a.default;var s=i(n(889));t.Diamond=s.default},91:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(494),o=i.lighten("#7396bf"),r=i.lighten("#7396bf",90),a=function(){function e(){this.x=0,this.y=0,this.customPosition=null,this.width=100,this.height=38,this.name="",this.pattern="#7396bf",this.mouseOverPattern=o,this.areaPattern=r,this.actived=!1,this.disabled=!1,this.recoverAnimateIng=!1,this.links=[],this.initColor("#7396bf")}return e.prototype.clickAnimate=function(){},e.prototype.easeOut=function(e,t,n,i){return-n*(e/=i)*(e-2)+t},e.prototype.animate=function(e,t){var n=this;void 0===t&&(t=400);var i={},o={};for(var r in e)"eAngle"===r?(i[r]=100*this[r],o[r]=100*e[r]-i[r]):(i[r]=this[r],o[r]=e[r]-this[r]);var a=0,s=t/1e3,l=function(){for(var e in(a+=n.stage2d.interval)>t&&(a=t),o)n[e]="eAngle"===e?n.easeOut(a/1e3,i[e],o[e],s)/100:n.easeOut(a/1e3,i[e],o[e],s);a<t&&requestAnimationFrame(l)};requestAnimationFrame(l)},e.prototype.triggerEvent=function(){this.stage2d.dispatchTarget(this)},e.prototype.initColor=function(e){/^#([a-fA-F\d]{6}|[a-fA-F\d]{3})$/.test(e)?(this.pattern=e,this.mouseOverPattern=i.lighten(e),this.areaPattern=i.lighten(e,90)):console.error("Only hex colors are supported")},e.prototype.getStageEvent=function(){return{mouseX:Math.round(this.stage2d.mouseX/this.stage2d.pixelRatio),mouseY:Math.round(this.stage2d.mouseY/this.stage2d.pixelRatio),pageX:this.stage2d.pageX,pageY:this.stage2d.pageY,target:this}},e}();t.default=a},567:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var t=e.call(this)||this;return t.radius=6,t.type="rect",t}return o(t,e),t.prototype.paintTitle=function(e){e.fillText(this.name,this.x,this.y)},t.prototype.paint=function(e){this.width<2*this.radius&&(this.radius=this.width/2),this.height<2*this.radius&&(this.radius=this.height/2);var t=this.x-this.width/2,n=this.y-this.height/2;e.beginPath(),e.moveTo(t+this.radius,n),e.arcTo(t+this.width,n,t+this.width,n+this.height,this.radius),e.arcTo(t+this.width,n+this.height,t,n+this.height,this.radius),e.arcTo(t,n+this.height,t,n,this.radius),e.arcTo(t,n,t+this.width,n,this.radius),e.closePath(),e.isPointInPath(this.stage2d.mouseX,this.stage2d.mouseY)?(e.fillStyle=this.mouseOverPattern,this.triggerEvent()):e.fillStyle=this.pattern,e.fillStyle=this.areaPattern,e.strokeStyle=this.pattern,e.fill(),e.stroke()},t}(r(n(91)).default);t.default=a},986:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var t=e.call(this)||this;return t.texts=null,t.textAlign="left",t.type="text",t}return o(t,e),t.prototype.breakStr=function(e){for(var t=this.name,n=function(t){for(var n=0,i=t.length-1;n<=i;){var o=Math.floor((n+i)/2),r=e.measureText(t.substr(0,o)).width,a=e.measureText(t.substr(0,o+1)).width;if(r<=480&&a>480)return o;r<480?n=o+1:i=o-1}return-1},i=[],o=0;-1!==(o=n(t));)i.push(t.substr(0,o)),t=t.substr(o);return t&&i.push(t),i},t.prototype.paintTitle=function(e){e.save(),e.textAlign=this.textAlign,e.font="12px Tahoma, Geneva, sans-serif",this.texts||(this.texts=this.breakStr(e));for(var t=18*(this.texts.length-1)/2,n=0;n<this.texts.length;n++)e.fillText(this.texts[n],this.x,this.y+18*n-t);e.restore()},t.prototype.paint=function(e){},t}(r(n(91)).default);t.default=a},655:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){this.x=e,this.y=t}},137:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.items=[]}return e.prototype.enqueue=function(e){this.items.push(e)},e.prototype.dequeue=function(){return this.items.shift()},e.prototype.front=function(){return this.items[0]},e.prototype.isEmpty=function(){return 0==this.items.length},e.prototype.size=function(){return this.items.length},e.prototype.clear=function(){this.items=[]},e}();t.default=n},475:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.stage2d=e;var t=document.createElement("canvas");t.width=e.width,t.height=e.height,t.style.position="absolute",this.stage2d.container.appendChild(t),this.canvas=t;var n=t.getContext("2d");n&&(this.context=n)}return e.prototype.initContext=function(){this.context.strokeStyle="#ffffff",this.context.lineJoin="bevel",this.context.lineCap="round",this.context.miterLimit=1,this.context.textAlign="center",this.context.textBaseline="middle",this.context.fillStyle="#ffffff",this.context.lineWidth=2,this.context.font="14px Tahoma, Geneva, sans-serif"},e.prototype.paint=function(e){var t=this,n=function(){if(t.stage2d.isVisibility){var i=t.stage2d,o=i.width,r=i.height,a=i.translateX,s=i.translateY,l=i.scale;t.context.clearRect(0,0,o,r),t.context.globalAlpha=1,t.context.save(),t.context.translate(a,s),t.context.scale(l,l),e(t.context),t.context.restore(),t.stage2d.dispatchTarget(null),t.stage2d.dispatchEvent()}requestAnimationFrame(n)};requestAnimationFrame(n)},e.prototype.paintGrid=function(){this.context.fillStyle="rgba(0, 0, 0, 0.05)";for(var e=-10;e<10;e++)for(var t=-10;t<10;t++)this.context.fillRect(200*t,200*e,100,100);for(e=-10;e<10;e++)for(t=-10;t<10;t++)this.context.fillRect(200*t+100,200*e+100,100,100);this.context.fillStyle="red",this.context.fillRect(-1,-1,2,2)},e.prototype.paintOnce=function(e){var t=this;requestAnimationFrame((function(){if(t.stage2d.isVisibility){var n=t.stage2d,i=n.width,o=n.height,r=n.translateX,a=n.translateY,s=n.scale;t.context.clearRect(0,0,i,o),t.context.globalAlpha=1,t.context.save(),t.context.translate(r,a),t.context.scale(s,s),e(t.context),t.context.restore()}}))},e}();t.default=n},471:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(137)),a=o(n(475)),s=o(n(655)),l=o(n(123)),d=n(658),c=n(494),u=0,h=function(){function e(e){var t=this;this.id="mind",this.scenes=[],this.scale=1,this.translateX=0,this.translateY=0,this.drawing=!1,this.pixelRatio=1,this.mouseX=0,this.mouseY=0,this.pageX=0,this.pageY=0,this.interval=0,this.isVisibility=!0,this.clickPointQueue=new r.default,this.mouseupPointQueue=new r.default,this.mousedownPointQueue=new r.default,this.mousemovePointQueue=new r.default,this.targets=[],this.container=e,this.width=e.clientWidth,this.height=e.clientHeight,this.container.style.position="relative",this.id=e.id||"mind";var n=e.getBoundingClientRect();this.offsetX=n.x,this.offsetY=n.y,this.translateX=parseInt(localStorage.getItem(this.id+"-translateX")||"0",10),this.translateY=parseInt(localStorage.getItem(this.id+"-translateY")||"0",10);var i=document.createElement("canvas").getContext("2d");i&&this.setPixelRatio(i),this.events=[],this.initEventListener(),document.addEventListener("visibilitychange",(function(){t.isVisibility="visible"===document.visibilityState})),this.requestAnimationFrame();var o=0,a=0;this.addEventListener("mousedown",(function(e){e.target||(t.drawing=!0,t.container.style.cursor="grab",o=e.mouseX,a=e.mouseY)})),this.addEventListener("mouseup",(function(e){e.target||(t.drawing=!1,t.container.style.cursor="auto",localStorage.setItem(t.id+"-translateX",t.translateX.toString()),localStorage.setItem(t.id+"-translateY",t.translateY.toString()))})),this.addEventListener("mousemove",(function(e){t.drawing&&(t.translateX=t.translateX+(e.mouseX-o),t.translateY=t.translateY+(e.mouseY-a)),o=e.mouseX,a=e.mouseY}))}return e.prototype.initTranslate=function(e,t){this.translateX=this.width/2-e/2,this.translateY=this.height/2-t/2},e.prototype.initEventListener=function(){var e=this;document.addEventListener("mouseup",(function(t){e.pageX=t.pageX,e.pageY=t.pageY,e.mouseX=(t.pageX-e.offsetX)*e.pixelRatio,e.mouseY=(t.pageY-e.offsetY)*e.pixelRatio,e.mouseupPointQueue.enqueue(new s.default(e.mouseX,e.mouseY))}),!1),this.container.addEventListener("mousedown",(function(t){e.pageX=t.pageX,e.pageY=t.pageY,e.mouseX=(t.pageX-e.offsetX)*e.pixelRatio,e.mouseY=(t.pageY-e.offsetY)*e.pixelRatio,e.mousedownPointQueue.enqueue(new s.default(e.mouseX,e.mouseY))}),!1),this.container.addEventListener("click",(function(t){e.clickPointQueue.enqueue(new s.default(e.mouseX,e.mouseY))}),!1),this.container.addEventListener("mousemove",(function(t){e.pageX=t.pageX,e.pageY=t.pageY,e.mouseX=(t.pageX-e.offsetX)*e.pixelRatio,e.mouseY=(t.pageY-e.offsetY)*e.pixelRatio,e.mousemovePointQueue.enqueue(new s.default(e.mouseX,e.mouseY))}),!1),document.addEventListener("drag",(function(t){0!==t.pageX&&(e.pageX=t.pageX,e.pageY=t.pageY,e.mouseX=(t.pageX-e.offsetX)*e.pixelRatio,e.mouseY=(t.pageY-e.offsetY)*e.pixelRatio,e.mousemovePointQueue.enqueue(new s.default(e.mouseX,e.mouseY)))}),!1),this.container.addEventListener("mousewheel",(function(t){e.stageScroll(t)}),!1)},e.prototype.getScene=function(){var e=new a.default(this);return this.scenes.push(e),e},e.prototype.setPixelRatio=function(e){this.pixelRatio=c.getPixelRatio(e)},e.prototype.addEventListener=function(e,t){var n;switch(e){default:n=d.CLICK;break;case"mouseup":n=d.MOUSEUP;break;case"mousedown":n=d.MOUSEDOWN;break;case"mousemove":n=d.MOUSEMOVE;break;case"mouseout":n=d.MOUSEOUT;break;case"mousewheel":n=d.MOUSEWHEEL}this.events.push(new l.default(n,t))},e.prototype.requestAnimationFrame=function(){var e=this,t=function(n){e.interval=n-u,u=n,requestAnimationFrame(t)};requestAnimationFrame(t)},e.prototype.setScale=function(e){this.scale=e},e.prototype.stageScroll=function(e){var t=this;Math.abs(e.pageX)>this.offsetX&&Math.abs(e.pageX)<this.offsetX+this.width&&Math.abs(e.pageY)>this.offsetY&&Math.abs(e.pageY)<this.offsetY+this.height&&(e.stopPropagation(),this.translateX=this.translateX-e.deltaX,this.translateY=this.translateY-e.deltaY),this.events.forEach((function(e){e.eventType===d.MOUSEWHEEL&&e.callback({target:t})}))},e.prototype.dispatchTarget=function(e){this.targets.push(e)},e.prototype.dispatchEvent=function(){var e=this,t={mouseX:Math.round(this.mouseX/this.pixelRatio),mouseY:Math.round(this.mouseY/this.pixelRatio),pageX:this.pageX,pageY:this.pageY};this.mousedownPointQueue.isEmpty()||(this.events.forEach((function(n){n.eventType===d.MOUSEDOWN&&n.callback(i(i({},t),{target:e.targets[0]}))})),this.mousedownPointQueue.dequeue()),this.mouseupPointQueue.isEmpty()||(this.events.forEach((function(n){n.eventType===d.MOUSEUP&&n.callback(i(i({},t),{target:e.targets[0]}))})),this.mouseupPointQueue.dequeue()),this.mousemovePointQueue.isEmpty()||(this.events.forEach((function(n){n.eventType===d.MOUSEMOVE&&n.callback(i(i({},t),{target:e.targets[0]}))})),this.mousemovePointQueue.clear()),this.clickPointQueue.isEmpty()||(this.events.forEach((function(n){n.eventType===d.CLICK&&n.callback(i(i({},t),{target:e.targets[0]}))})),this.clickPointQueue.dequeue()),this.targets.length=0},e}();t.default=h},583:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["#7396bf","#f2711c","#2185d0","#21ba45","#b5cc18","#00b5ad","#fbbd08","#6435c9","#a333c8","#e03997","#a5673f"],i=function(){function e(e){var t=this;this.callback=function(){},this.dragenter=function(){},this.dragend=function(){},this.filled=function(e){},this.changed=function(e){},this.targetType="rect",this.nodeType="rect",this.bar=e,this.zoomTexter=e.querySelector("#zoomTexter")||document.createElement("li"),this.deleteNode=e.querySelector("#deleteNode")||document.createElement("li"),this.fillStyle=e.querySelector("#fillStyle")||document.createElement("li"),this.setterContainer=e.querySelector("#setterContainer")||document.createElement("li"),document.addEventListener("dragstart",(function(e){e.target instanceof HTMLElement&&(t.targetType=e.target.dataset.type||"rect")}),!1),document.addEventListener("dragend",(function(e){setTimeout((function(){t.dragend()}),0)}),!1),e.onclick=function(n){var i=(n.path?n.path:n.composedPath?n.composedPath():[]).find((function(e){if("li"===e.localName)return e}));if(i&&i instanceof HTMLElement){var o=i.dataset.type||"rect";if("pick-color"===o&&(-1!==i.className.indexOf("opened")?i.classList.remove("opened"):i.classList.add("opened"),n.stopPropagation()),"setter"===o&&(i.classList.add("opened"),n.stopPropagation()),t.callback){var r=e.querySelector("li.item-node.enabled");r&&(r.classList.remove("enabled"),i.classList.add("enabled"),t.nodeType=o),t.callback({target:i,type:o})}}},this.initPickColor(),this.initSetter(),document.addEventListener("click",(function(){t.fillStyle.classList.remove("opened"),t.setterContainer.classList.remove("opened")}))}return e.prototype.initPickColor=function(){var e=this,t=this.fillStyle.querySelector("#pickColor");if(t){var i=n.map((function(e){return'<span style="background-color: '+e+'" data-color="'+e+'"></span>'})).join("");t.innerHTML="<div>"+i+"</div>",t.onclick=function(t){t.stopPropagation(),t.target instanceof HTMLElement&&"span"===t.target.localName&&e.filled(t.target.dataset.color)}}},e.prototype.initSetter=function(){var e=this;if(this.setterContainer.querySelector("#setter")){var t=this.setterContainer.querySelector("#spaceWidth"),n=this.setterContainer.querySelector("#spaceHeight"),i=this.setterContainer.querySelector("#spaceWidthText"),o=this.setterContainer.querySelector("#spaceHeightText");t&&n&&i&&o&&(t.oninput=function(){i.textContent=t.value,e.changed({spaceWidth:parseInt(t.value,10),spaceHeight:parseInt(n.value,10)})},n.oninput=function(){o.textContent=n.value,e.changed({spaceWidth:parseInt(t.value,10),spaceHeight:parseInt(n.value,10)})})}},e.prototype.onClick=function(e){this.callback=e},e.prototype.onDrag=function(e){this.dragenter=e},e.prototype.onDragend=function(e){this.dragend=e},e.prototype.onFill=function(e){this.filled=e},e.prototype.onChange=function(e){this.changed=e},e.prototype.setZoomText=function(e){this.zoomTexter.textContent=e+"%"},e.prototype.enableDeleteNode=function(){this.deleteNode.classList.add("enabled"),this.fillStyle.classList.add("enabled")},e.prototype.disableDeleteNode=function(){this.deleteNode.classList.remove("enabled"),this.fillStyle.classList.remove("enabled")},e.init=function(t,n){var i=document.createElement("div");i.classList.add("toolbar"),i.innerHTML='\n      <ul>\n        <li class="tool-item item-btn enabled" data-type="info">\n          <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="22" height="22"><path d="M512.50142 958.397886c-119.320573 0-231.499491-46.465265-315.871087-130.837884C112.258737 743.188406 65.792449 631.010511 65.792449 511.688915c0-119.319549 46.466288-231.499491 130.837884-315.871087C281.002952 111.445208 393.180847 64.979944 512.50142 64.979944s231.499491 46.465265 315.871087 130.837884c84.372619 84.372619 130.837884 196.551538 130.837884 315.871087 0 119.321596-46.465265 231.499491-130.837884 315.871087C744.000911 911.932622 631.821993 958.397886 512.50142 958.397886zM512.50142 105.962334c-223.718271 0-405.726581 182.00831-405.726581 405.726581s182.00831 405.726581 405.726581 405.726581c223.718271 0 405.727605-182.00831 405.727605-405.726581S736.220714 105.962334 512.50142 105.962334z"></path><path d="M510.150886 775.953647c-18.107403 0-32.745798-14.678304-32.745798-32.785707L477.405087 452.191846c0-18.108426 14.638395-32.785707 32.745798-32.785707 18.107403 0 32.745798 14.678304 32.745798 32.785707l0 290.976094C542.896684 761.275343 528.258289 775.953647 510.150886 775.953647z"></path><path d="M511.357364 296.458969m-45.080731 0a44.054 44.054 0 1 0 90.161463 0 44.054 44.054 0 1 0-90.161463 0Z"></path></svg>\n          <div class="help-info">\n            <dl>\n              <dt>使用帮助：</dt>\n              <dd>1. 双击节点修改名称；</dd>\n              <dd>2. 拖动图形到工作区，添加一个新的根节点；</dd>\n              <dd>3. 选中节点，然后点击控制句柄添加子节点；</dd>\n              <dd>4. 选中节点，使用调色盘改变节点；</dd>\n              <dd>5. 选中节点，按 delete 删除节点；</dd>\n            </dl>\n          </div>\n        </li>\n        <li class="tool-item item-node enabled" data-type="rect" draggable="true">\n          <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path d="M760 960H264c-110.5 0-200-89.5-200-200V264c0-110.5 89.5-200 200-200h496c110.5 0 200 89.5 200 200v496c0 110.5-89.5 200-200 200z"></path></svg>\n        </li>\n        <li class="tool-item item-node" data-type="circle" draggable="true">\n          <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path d="M512 512m-448 0a448 448 0 1 0 896 0 448 448 0 1 0-896 0Z"></path></svg>\n        </li>\n        <li class="tool-item item-node" data-type="rect" draggable="true">\n          <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path d="M442.7 145.8L66.1 798.2c-30.8 53.3 7.7 120 69.3 120h753.3c61.6 0 100.1-66.7 69.3-120L581.3 145.8c-30.8-53.3-107.8-53.3-138.6 0z"></path></svg>\n        </li>\n        <li class="tool-item item-node" data-type="diamond" draggable="true">\n          <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="28" height="28"><path d="M938 550.1l-404.1 233c-13.6 7.8-30.3 7.8-43.8 0L86 550.1c-29.4-16.9-29.4-59.3 0-76.3l404.1-233c13.6-7.8 30.3-7.8 43.8 0l404.1 233c29.3 17 29.3 59.4 0 76.3z"></path></svg>\n        </li>\n        <li class="tool-item item-node" data-type="rect" draggable="true">\n          <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M896.2 789H127.8c-29.5 0-48.8-30.9-36-57.4l230-474c6.7-13.8 20.7-22.5 36-22.5h308.3c15.3 0 29.3 8.7 36 22.5l230 474c12.9 26.5-6.4 57.4-35.9 57.4z"></path></svg>\n        </li>\n        <li id="fillStyle" class="tool-item item-btn" data-type="pick-color">\n          <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="26" height="26"><path d="M204.4 524.9c-14.5 1.5-26.2 13.2-27.7 27.7-2.1 19.9 14.6 36.7 34.6 34.6 14.5-1.5 26.2-13.2 27.8-27.8 2-19.9-14.8-36.6-34.7-34.5zM265.4 473.7c21.8-1.9 39.4-19.5 41.4-41.4 2.5-28.5-21.2-52.3-49.7-49.7-21.8 1.9-39.4 19.5-41.4 41.4-2.6 28.4 21.2 52.2 49.7 49.7zM415.8 266.9c-28.5 1.8-51.6 24.9-53.4 53.4-2.2 34.5 26.4 63.1 60.9 60.9 28.5-1.8 51.6-24.9 53.4-53.4 2.1-34.6-26.4-63.1-60.9-60.9zM621.9 253.8c-35.1 2.2-63.4 30.6-65.6 65.6-2.7 42.4 32.4 77.6 74.8 74.8 35.1-2.2 63.4-30.6 65.6-65.6 2.8-42.4-32.3-77.5-74.8-74.8zM966.5 276.4c-0.5-7.6-4-14.6-9.8-19.6l-0.7-0.6c-5.2-4.5-11.9-7-18.8-7-8.3 0-16.2 3.6-21.6 9.9L574 652.4l-43.5 85.5 1.1 0.9-4.9 11.3 11.1-5.9 1.5 1.3 78-54.3 342.3-394c5-5.8 7.4-13.2 6.9-20.8z"></path><path d="M897.8 476.3c-13.8-1.4-26.7 7.4-30.4 20.7-6.9 24.6-19.3 64.5-35.1 97.8C809.5 643 767.4 710.1 696.7 756c-72.2 46.9-142.7 56.7-189.2 56.7-37 0-72.2-6.1-101.7-17.7-26.9-10.5-46.4-24.6-54.9-39.7-3.4-6.1-7.2-12.9-11.2-20.2-17.2-31.1-36.6-66.5-49.7-77.4-15.9-13.2-39.1-15-59.8-15-8.1 0-40.8 1.3-48.5 1.3-33.1 0-49.4-6.5-56.1-22.4-17.8-42.3-7.3-114.3 26.8-183.4C205.2 331.4 300 253.3 412.6 224c40-10.6 81.2-18.9 121.3-18.9 85.6 0 187.8 32.8 252.5 77.2 11.4 7.8 26.9 5.8 35.7-4.9 10.4-12.6 7.1-31.4-6.8-39.8-23.3-14-57.9-34-86.3-47.1-60.3-27.9-123.7-41.9-189.2-41.9-68.1 0-148.8 16.4-217.2 47.2-78.1 35-135.2 85-179.4 147.5-36.4 51.4-67.8 111.1-80.1 168.7-7.5 35.1-6.8 57.4-2.4 87.8 4.2 29.2 13.4 52.5 26.9 67.5 22.4 25.1 51.5 37.4 89 37.4 13.9 0 56.3-5 63.1-5 7.4 0 12.2 1.2 14.4 3.8 6.4 7.4 14.4 22.4 23.7 39.9 7.5 14.1 15.9 30.1 25.4 45.3 12.1 19.5 36.9 40.4 66.5 55.9 27 14.1 71.9 31 132.2 31 72 0 148.3-23.6 226.7-70.1 74.9-44.4 123-118.9 150.2-173.6 19-38.3 34.7-87.2 43.8-119.1 4.8-17.3-7-34.7-24.8-36.5z"></path></svg>\n          <div id="pickColor" class="pick-color"></div>\n        </li>\n        <li id="setterContainer" class="tool-item item-btn enabled" data-type="setter">\n          <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="26" height="26"><path d="M536.682 249.5c-12.419-39.397-49.288-68.056-92.738-68.056s-80.319 28.659-92.738 68.056H162v58.333h189.207c12.419 39.397 49.288 68.056 92.738 68.056s80.319-28.659 92.738-68.056H862V249.5H536.682z m-67.287 58.333c-6.84 5.977-15.676 9.722-25.451 9.722-9.774 0-18.611-3.746-25.451-9.722-8.165-7.135-13.438-17.493-13.438-29.167s5.273-22.032 13.438-29.167c6.84-5.977 15.676-9.722 25.451-9.722 9.774 0 18.611 3.746 25.451 9.722 8.165 7.135 13.438 17.493 13.438 29.167s-5.273 22.032-13.438 29.167zM618.944 414.778c-43.45 0-80.319 28.659-92.738 68.056H162v58.333h364.207c12.419 39.397 49.288 68.056 92.738 68.056s80.319-28.659 92.738-68.056H862v-58.333H711.682c-12.419-39.398-49.288-68.056-92.738-68.056z m25.451 126.389c-6.839 5.977-15.676 9.722-25.451 9.722-9.774 0-18.611-3.746-25.451-9.722-8.165-7.135-13.438-17.493-13.438-29.167 0-11.673 5.273-22.032 13.438-29.167 6.839-5.977 15.676-9.722 25.451-9.722 9.774 0 18.611 3.746 25.451 9.722 8.165 7.135 13.438 17.493 13.438 29.167 0 11.673-5.273 22.032-13.438 29.167zM405.056 648.111c-43.45 0-80.319 28.659-92.738 68.056H162V774.5h150.318c12.419 39.397 49.288 68.056 92.738 68.056s80.319-28.659 92.738-68.056H862v-58.333H497.793c-12.419-39.397-49.288-68.056-92.737-68.056z m25.45 126.389c-6.84 5.977-15.676 9.722-25.451 9.722-9.774 0-18.611-3.746-25.451-9.722-8.165-7.135-13.438-17.493-13.438-29.167 0-11.673 5.273-22.032 13.438-29.167 6.84-5.977 15.676-9.722 25.451-9.722 9.774 0 18.611 3.745 25.451 9.722 8.165 7.135 13.438 17.493 13.438 29.167 0 11.674-5.272 22.032-13.438 29.167z"></path></svg>\n          <div id="setter" class="setter">\n            <div>\n              <p>\n                <label for="spaceWidth">左右间距： <input min="100" max="600" id="spaceWidth" step="10" value="'+n.spaceWidth+'" name="spaceWidth" type="range" /> <em id="spaceWidthText">'+n.spaceWidth+'</em></label>\n                <label for="spaceHeight">上下间距： <input  min="50" max="600" id="spaceHeight" step="10" value="'+n.spaceHeight+'" name="spaceHeight" type="range" /> <em id="spaceHeightText">'+n.spaceHeight+'</em></label>\n              </p>\n            </div>\n          </div>\n        </li>\n        <li></li>\n        <li class="tool-item item-btn enabled" data-type="zoom-out" data-title="缩小">\n          <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="28" height="28"><path d="M450.31 236.69c56.72 0 110.04 22.09 150.15 62.19 82.79 82.79 82.79 217.51 0 300.3-40.11 40.11-93.43 62.19-150.15 62.19s-110.04-22.09-150.15-62.19c-82.79-82.79-82.79-217.51 0-300.3 40.11-40.11 93.43-62.19 150.15-62.19m0-32c-62.53 0-125.07 23.86-172.78 71.57-95.42 95.42-95.42 250.13 0 345.55 47.71 47.71 110.24 71.57 172.78 71.57 62.53 0 125.07-23.86 172.78-71.57 95.42-95.42 95.42-250.13 0-345.55-47.71-47.72-110.24-71.57-172.78-71.57z"></path><path d="M804.76 806.05c-17.54 17.54-46.24 17.54-63.78 0L570.94 636l63.78-63.78 170.05 170.05c17.53 17.54 17.53 46.24-0.01 63.78zM547.6 465.03H353.04c-8.84 0-16-7.16-16-16s7.16-16 16-16H547.6c8.84 0 16 7.16 16 16s-7.16 16-16 16z"></path></svg>\n        </li>\n        <li id="zoomTexter" class="zoom-texter"></li>\n        <li class="tool-item item-btn enabled" data-type="zoom-in" data-title="放大">\n          <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="28" height="28"><path d="M450.31 236.69c56.72 0 110.04 22.09 150.15 62.19 40.11 40.11 62.19 93.43 62.19 150.15s-22.09 110.04-62.19 150.15c-40.11 40.11-93.43 62.19-150.15 62.19s-110.04-22.09-150.15-62.19c-82.79-82.79-82.79-217.51 0-300.3 40.11-40.11 93.43-62.19 150.15-62.19m0-32c-62.53 0-125.07 23.86-172.78 71.57-95.42 95.42-95.42 250.13 0 345.55 47.71 47.71 110.24 71.57 172.78 71.57 62.53 0 125.07-23.86 172.78-71.57 95.42-95.42 95.42-250.13 0-345.55-47.71-47.72-110.24-71.57-172.78-71.57z"></path><path d="M804.76 806.05c-17.54 17.54-46.24 17.54-63.78 0L570.94 636l63.78-63.78 170.05 170.05c17.53 17.54 17.53 46.24-0.01 63.78zM547.6 465.03H353.03c-8.84 0-16-7.16-16-16s7.16-16 16-16H547.6c8.84 0 16 7.16 16 16s-7.16 16-16 16z"></path><path d="M450.32 562.31c-8.84 0-16-7.16-16-16V351.75c0-8.84 7.16-16 16-16s16 7.16 16 16v194.56c0 8.84-7.16 16-16 16z"></path></svg>\n        </li>\n        <li></li>\n        <li class="tool-item item-btn enabled" data-type="copy-json" data-title="复制JSON数据">\n          <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="22" height="22"><path d="M857.373005 65.290005 469.604424 65.290005c-34.211173 0-62.044078 27.832905-62.044078 62.043055l0 10.340509-63.076594 0c-25.993001 0-48.228421 16.346293-57.001225 39.293935L166.626995 176.967504c-34.21015 0-62.043055 27.832905-62.043055 62.043055l0 657.655358c0 34.21015 27.832905 62.043055 62.043055 62.043055l550.115086 0c34.21015 0 62.043055-27.832905 62.043055-62.043055l0-49.634444 78.587869 0c34.21015 0 62.043055-27.832905 62.043055-62.043055L919.41606 127.33306C919.41606 93.122911 891.583155 65.290005 857.373005 65.290005zM344.483752 179.035606l194.402595 0c10.833743 0 19.646456 8.813736 19.646456 19.646456 0 10.833743-8.813736 19.646456-19.646456 19.646456L344.483752 218.328517c-10.833743 0-19.646456-8.813736-19.646456-19.646456C324.836273 187.849342 333.650009 179.035606 344.483752 179.035606zM737.423099 896.665917c0 11.402701-9.278317 20.681018-20.681018 20.681018L166.626995 917.346935c-11.403724 0-20.681018-9.278317-20.681018-20.681018L145.945977 239.010559c0-11.402701 9.277294-20.681018 20.681018-20.681018l120.111588 0c8.197706 24.02723 30.977525 41.362037 57.744145 41.362037l194.402595 0c26.767644 0 49.54644-17.334807 57.744145-41.362037l120.111588 0c11.402701 0 20.681018 9.278317 20.681018 20.681018L737.422076 896.665917zM878.054023 784.988418c0 11.402701-9.278317 20.681018-20.681018 20.681018l-78.587869 0L778.785136 239.010559c0-34.21015-27.832905-62.043055-62.043055-62.043055L595.886549 176.967504c-8.771781-22.947641-31.007201-39.293935-57.001225-39.293935l-89.963964 0L448.921359 127.33306c0-11.403724 9.278317-20.681018 20.683065-20.681018l387.768581 0c11.402701 0 20.681018 9.277294 20.681018 20.681018L878.054023 784.988418z"></path><path d="M620.597347 334.252737 260.748652 334.252737c-11.422144 0-20.681018 9.259898-20.681018 20.681018s9.258874 20.681018 20.681018 20.681018l359.849718 0c11.42112 0 20.681018-9.259898 20.681018-20.681018S632.018467 334.252737 620.597347 334.252737z"></path><path d="M620.597347 454.201619 260.748652 454.201619c-11.422144 0-20.681018 9.259898-20.681018 20.681018 0 11.42112 9.258874 20.681018 20.681018 20.681018l359.849718 0c11.42112 0 20.681018-9.259898 20.681018-20.681018C641.278365 463.46254 632.018467 454.201619 620.597347 454.201619z"></path><path d="M440.673511 574.151525 260.748652 574.151525c-11.422144 0-20.681018 9.259898-20.681018 20.681018 0 11.42112 9.258874 20.681018 20.681018 20.681018l179.924859 0c11.42112 0 20.681018-9.259898 20.681018-20.681018C461.35453 583.411423 452.093609 574.151525 440.673511 574.151525z"></path></svg>\n        </li>\n        <li class="tool-item item-btn enabled" data-type="save-to-image" data-title="保存为图片">\n          <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="22" height="22"><path d="M841.71335 65.290005 182.285626 65.290005c-64.511269 0-116.995621 52.484352-116.995621 116.995621L65.290005 841.71335c0 64.511269 52.484352 116.995621 116.995621 116.995621l659.427724 0c64.511269 0 116.995621-52.484352 116.995621-116.995621L958.708971 182.285626C958.708971 117.774357 906.225643 65.290005 841.71335 65.290005zM182.285626 107.833961l659.427724 0c41.051975 0 74.451666 33.398668 74.451666 74.451666l0 136.557142c-150.09446 5.26184-290.370297 66.084091-396.978337 172.692131-49.960879 49.961902-89.841168 107.331517-118.694309 169.625282-83.496669-70.835302-204.372667-75.376735-292.65841-13.617136L107.833961 182.285626C107.833961 141.232628 141.232628 107.833961 182.285626 107.833961zM107.833961 841.71335 107.833961 702.627618c76.54228-74.311473 198.833511-74.234725 275.272437 0.24457-24.303522 65.298192-37.026288 135.112234-37.026288 206.91149 0 2.223644 0.343831 4.366448 0.977257 6.381337L182.285626 916.165016C141.232628 916.165016 107.833961 882.766348 107.833961 841.71335zM841.71335 916.165016 387.646807 916.165016c0.633427-2.01489 0.977257-4.157693 0.977257-6.381337 0-146.71755 57.053414-284.572244 160.647817-388.166647 98.570993-98.570993 228.166583-154.963351 366.894158-160.204725L916.166039 841.71335C916.165016 882.766348 882.766348 916.165016 841.71335 916.165016z"></path><path d="M312.397986 413.458683c60.8376 0 110.332874-49.494251 110.332874-110.332874s-49.494251-110.332874-110.332874-110.332874-110.332874 49.494251-110.332874 110.332874S251.559363 413.458683 312.397986 413.458683zM312.397986 235.337913c37.378306 0 67.788919 30.40959 67.788919 67.788919s-30.40959 67.788919-67.788919 67.788919-67.788919-30.40959-67.788919-67.788919S275.018657 235.337913 312.397986 235.337913z"></path></svg>\n        </li>\n        <li class="tool-item item-btn enabled" data-type="clear" data-title="清除缓存节点">\n          <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="22" height="22"><path d="M909.050991 169.476903l-217.554898 0 0-31.346939c0-39.5866-32.205493-71.792093-71.793116-71.792093L408.15591 66.337871c-39.5866 0-71.792093 32.205493-71.792093 71.792093l0 31.346939L113.349581 169.476903c-11.013845 0-19.942191 8.940626-19.942191 19.954471s8.928347 19.954471 19.942191 19.954471l84.264149 0 0 640.687918c0 60.479443 49.203632 109.683075 109.683075 109.683075l416.474366 0c60.479443 0 109.683075-49.203632 109.683075-109.683075L833.454246 209.385844l75.595722 0c11.012821 0 19.942191-8.940626 19.942191-19.954471S920.063813 169.476903 909.050991 169.476903zM376.2482 138.130987c0-17.593703 14.314007-31.907711 31.907711-31.907711l211.547067 0c17.593703 0 31.907711 14.314007 31.907711 31.907711l0 31.346939L376.2482 169.477926 376.2482 138.130987zM793.569864 850.074785c0 38.486546-31.312146 69.798692-69.798692 69.798692L307.297828 919.873478c-38.486546 0-69.798692-31.312146-69.798692-69.798692L237.499136 211.042577l556.070728 0L793.569864 850.074785z"></path><path d="M510.662539 861.276918c11.012821 0 19.954471-8.92937 19.954471-19.942191L530.61701 294.912753c0-11.013845-8.94165-19.942191-19.954471-19.942191s-19.954471 8.928347-19.954471 19.942191L490.708068 841.334727C490.708068 852.347548 499.649717 861.276918 510.662539 861.276918z"></path><path d="M374.562814 801.449321c11.012821 0 19.954471-8.92937 19.954471-19.942191L394.517285 354.74035c0-11.013845-8.94165-19.942191-19.954471-19.942191s-19.954471 8.928347-19.954471 19.942191l0 426.76678C354.608344 792.519951 363.549993 801.449321 374.562814 801.449321z"></path><path d="M649.832182 801.449321c11.012821 0 19.954471-8.92937 19.954471-19.942191L669.786653 354.74035c0-11.013845-8.94165-19.942191-19.954471-19.942191s-19.954471 8.928347-19.954471 19.942191l0 426.76678C629.877711 792.519951 638.81936 801.449321 649.832182 801.449321z"></path></svg>\n        </li>\n\n        <li class="tool-item item-btn" style="display: none;" data-type="link" data-title="连线">\n          <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="22" height="22"><path d="M818.732963 208.222345c-8.163937-30.466895-27.702945-55.929824-55.019081-71.701019l-96.015797-55.434543c-56.388265-32.55444-128.750339-13.165858-161.304779 43.221384L209.587436 638.392642c-5.41022 4.086062-8.756431 10.701736-8.363482 17.98256l15.232936 282.377252c0.384763 7.143701 4.366448 13.605879 10.574846 17.163915 3.243881 1.860371 6.864338 2.793626 10.488889 2.793626 3.313465 0 6.631024-0.780783 9.667174-2.346441L497.492588 827.294966c4.306072-2.220574 7.503904-5.726421 9.411347-9.79918l279.395338-483.926618c0.296759-0.434905 0.61296-0.849344 0.881067-1.311879 0.357134-0.618077 0.677429-1.248434 0.964978-1.885953l18.789948-32.54523C822.707484 270.50997 826.895877 238.688217 818.732963 208.222345zM589.014024 110.041232c19.584034-5.244444 40.034808-2.555196 57.59065 7.581676l96.015797 55.434543c17.556864 10.135848 30.113855 26.501584 35.361369 46.083571 5.246491 19.580964 2.554172 40.033785-7.581676 57.59065l-9.30083 16.109909L533.629623 161.511487l9.30083-16.109909C553.066301 127.845737 569.43306 115.287723 589.014024 110.041232zM512.535189 198.047612l227.468688 131.329071L496.90828 750.430344l-4.188392-19.609617c-2.114151-9.900487-10.859325-16.692171-20.60734-16.692171-1.394766 0-2.809999 0.140193-4.229325 0.428765l-50.179866 10.211573-13.875009-46.64025c-3.116991-10.475586-13.71435-16.838503-24.430412-14.654768l-50.011021 10.18906-13.328563-46.080501c-1.577938-5.455245-5.288446-10.042727-10.290367-12.726859-5.004991-2.688225-10.878768-3.238764-16.295128-1.539053l-20.392446 6.40692L512.535189 198.047612zM244.301052 671.725818l37.225833-11.69332 12.739139 44.045145c3.053546 10.559497 13.69286 17.005302 24.476461 14.809287l50.15633-10.219759 13.873985 46.638203c3.116991 10.475586 13.71435 16.836457 24.426319 14.654768l48.627511-9.896394 7.93574 37.156248L256.827343 903.925251 244.301052 671.725818z"></path></svg>\n        </li>\n        <li id="deleteNode" class="tool-item item-btn" data-type="delete" data-title="删除节点">\n          <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="22" height="22"><path d="M502.690909 0h18.618182v46.545455h-18.618182z" fill="#1277B5"></path><path d="M512 0C230.4 0 0 230.4 0 512s230.4 512 512 512 512-230.4 512-512S793.6 0 512 0z m0 979.781818c-258.327273 0-467.781818-209.454545-467.781818-467.781818S253.672727 46.545455 512 46.545455c258.327273 0 467.781818 209.454545 467.781818 467.781818s-209.454545 465.454545-467.781818 465.454545z" fill=""></path><path d="M702.836364 670.254545L544.581818 512l158.254546-158.254545c9.309091-9.309091 9.309091-23.272727 0-32.581819-9.309091-9.309091-23.272727-9.309091-32.581819 0L512 479.418182l-158.254545-158.254546c-9.309091-9.309091-23.272727-9.309091-32.581819 0-9.309091 9.309091-9.309091 23.272727 0 32.581819l158.254546 158.254545-158.254546 158.254545c-9.309091 9.309091-9.309091 23.272727 0 32.581819 9.309091 9.309091 23.272727 9.309091 32.581819 0l158.254545-158.254546 158.254545 158.254546c9.309091 9.309091 23.272727 9.309091 32.581819 0 9.309091-6.981818 9.309091-23.272727 0-32.581819z" fill=""></path></svg>\n        </li>\n        <li class="tool-item item-btn enabled" data-type="undo" data-title="撤销">\n          <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="22" height="22"><path d="M533.333333 981.333333c-66.046667 0-129.66-14.046667-189.073333-41.74a449.473333 449.473333 0 0 1-149.333333-112.666666 21.333333 21.333333 0 1 1 32.213333-28A405.333333 405.333333 0 0 0 533.333333 938.666667c223.5 0 405.333333-181.833333 405.333334-405.333334s-181.833333-405.333333-405.333334-405.333333c-168.166667 0-316.16 101.713333-376.98 256H320a21.333333 21.333333 0 0 1 0 42.666667H106.666667a21.333333 21.333333 0 0 1-21.333334-21.333334V192a21.333333 21.333333 0 0 1 42.666667 0v150.266667A448.226667 448.226667 0 1 1 533.333333 981.333333z" fill="#5C5C66"></path></svg>\n        </li>\n        <li class="tool-item item-btn enabled" data-type="redo" data-title="重做">\n          <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="22" height="22"><path d="M533.333333 981.333333c66.046667 0 129.66-14.046667 189.073334-41.74a449.473333 449.473333 0 0 0 149.333333-112.666666 21.333333 21.333333 0 0 0-32.213333-28A405.333333 405.333333 0 0 1 533.333333 938.666667c-223.5 0-405.333333-181.833333-405.333333-405.333334s181.833333-405.333333 405.333333-405.333333c168.166667 0 316.16 101.713333 376.98 256H746.666667a21.333333 21.333333 0 0 0 0 42.666667h213.333333a21.333333 21.333333 0 0 0 21.333333-21.333334V192a21.333333 21.333333 0 0 0-42.666666 0v150.266667A448.226667 448.226667 0 1 0 533.333333 981.333333z" fill="#5C5C66"></path></svg>\n        </li>\n      </ul>\n    ',document.body.appendChild(i),i.style.marginLeft="-"+i.clientWidth/2+"px";var o=new e(i);return t.addEventListener("dragenter",(function(e){o.dragenter(o.targetType,e)}),!1),o},e}();t.default=i},104:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(479)),s=function(){function e(){this.undos=[],this.redos=[]}return e.prototype.recordDiff=function(e,t){var n=a.diffChars(e,t),i=this.minimizeDiffInfo(n);return this.undos.push(i),this.redos=[],n},e.prototype.minimizeDiffInfo=function(e){return e.map((function(e){return e.added?"+"+e.value:e.removed?"-"+e.value:e.count||0}))},e.prototype.undo=function(e){var t=this.undos.pop();return t?(this.redos.push(t),this.unmerge(e,t)):e},e.prototype.redo=function(e){var t=this.redos.pop();return t?(this.undos.push(t),this.merge(e,t)):e},e.prototype.merge=function(e,t){for(var n="",i=0,o=0;o<t.length;o++){var r=t[o];"number"!=typeof r?"string"==typeof r&&("+"===r[0]&&(n+=r.slice(1,r.length)),"-"===r[0]&&(i+=r.length-1)):(n+=e.slice(i,i+r),i+=r)}return n},e.prototype.unmerge=function(e,t){for(var n="",i=0,o=0;o<t.length;o++){var r=t[o];"number"!=typeof r?"string"==typeof r&&("+"===r[0]&&(i+=r.length-1),"-"===r[0]&&(n+=r.slice(1,r.length))):(n+=e.slice(i,i+r),i+=r)}return n},e}();t.default=new s},494:(e,t)=>{"use strict";function n(e,t,n){var i=(e<<16|t<<8|n).toString(16);return"#"+new Array(Math.abs(i.length-7)).join("0")+i}function i(e){for(var t=[],n=1;n<7;n+=2)t.push(parseInt("0x"+e.slice(n,n+2),16));return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getPixelRatio=t.alpha=t.darken=t.lighten=void 0,t.lighten=function(e,t){void 0===t&&(t=10);var o=i(e).map((function(e){return Math.min(e+t/100*(255-e),255)}));return n(o[0],o[1],o[2])},t.darken=function(e,t){void 0===t&&(t=10);var o=i(e).map((function(e){return Math.max(e-t,0)}));return n(o[0],o[1],o[2])},t.alpha=function(e,t){var n=i(e);return"rgba("+n[0]+", "+n[1]+", "+n[2]+", "+t+")"},t.getPixelRatio=function(e){return(window.devicePixelRatio||1)/1}}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={id:i,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i,o,r={};return i=CanvasRenderingContext2D.prototype,1!==(o=function(){var e=document.createElement("canvas").getContext("2d"),t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t}())&&(function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}({fillRect:"all",clearRect:"all",strokeRect:"all",moveTo:"all",lineTo:"all",arc:[0,1,2],arcTo:"all",bezierCurveTo:"all",isPointinPath:"all",isPointinStroke:"all",quadraticCurveTo:"all",rect:"all",translate:"all",createRadialGradient:"all",createLinearGradient:"all"},(function(e,t){i[t]=function(t){return function(){var n,i,r=Array.prototype.slice.call(arguments);if("all"===e)r=r.map((function(e){return e*o}));else if(Array.isArray(e))for(n=0,i=e.length;i>n;n++)r[e[n]]*=o;return t.apply(this,r)}}(i[t])})),i.stroke=function(e){return function(){this.lineWidth*=o,e.apply(this,arguments),this.lineWidth/=o}}(i.stroke),i.fillText=function(e){return function(){var t=Array.prototype.slice.call(arguments);t[1]*=o,t[2]*=o,this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(e,t,n){return t*o+n})),e.apply(this,t),this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(e,t,n){return t/o+n}))}}(i.fillText),i.strokeText=function(e){return function(){var t=Array.prototype.slice.call(arguments);t[1]*=o,t[2]*=o,this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(e,t,n){return t*o+n})),e.apply(this,t),this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(e,t,n){return t/o+n}))}}(i.strokeText)),function(e){e.getContext=function(e){return function(t){var n,i,o=e.call(this,t);return"2d"===t&&(n=o.backingStorePixelRatio||o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1,(i=(window.devicePixelRatio||1)/n)>1&&(this.style.height=this.height+"px",this.style.width=this.width+"px",this.width*=i,this.height*=i)),o}}(e.getContext)}(HTMLCanvasElement.prototype),(()=>{"use strict";var e=r;Object.defineProperty(e,"__esModule",{value:!0});var t=n(72);n(283),e.default=t.Mind})(),r})()}));