!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["simple-chart"]=e():t["simple-chart"]=e()}(self,(function(){return(()=>{"use strict";var t={357:(t,e,i)=>{i.d(e,{Z:()=>r});var n=i(645),o=i.n(n)()((function(t){return t[1]}));o.push([t.id,".node-adder{position:absolute;box-sizing:border-box;z-index:999}.node-adder .adder-handle{display:block;position:absolute;width:5px;height:5px;border-radius:5px;border:1px solid #aaa;background-color:#fff;cursor:pointer}.node-adder .adder-handle.handle-left{left:-4px;top:50%;margin-top:-4px}.node-adder .adder-handle.handle-top{top:-4px;left:50%;margin-left:-4px}.node-adder .adder-handle.handle-right{right:-4px;top:50%;margin-top:-4px}.node-adder .adder-handle.handle-bottom{bottom:-4px;left:50%;margin-left:-4px}\n",""]);const r=o},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=t(e);return e[2]?"@media ".concat(e[2]," {").concat(i,"}"):i})).join("")},e.i=function(t,i,n){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(n)for(var r=0;r<this.length;r++){var a=this[r][0];null!=a&&(o[a]=!0)}for(var s=0;s<t.length;s++){var u=[].concat(t[s]);n&&o[u[0]]||(i&&(u[2]?u[2]="".concat(i," and ").concat(u[2]):u[2]=i),e.push(u))}},e}},283:(t,e,i)=>{i.r(e),i.d(e,{default:()=>g});var n=i(379),o=i.n(n),r=i(795),a=i.n(r),s=i(569),u=i.n(s),l=i(565),c=i.n(l),h=i(216),d=i.n(h),p=i(589),f=i.n(p),m=i(357),v={};v.styleTagTransform=f(),v.setAttributes=c(),v.insert=u().bind(null,"head"),v.domAPI=a(),v.insertStyleElement=d(),o()(m.Z,v);const g=m.Z&&m.Z.locals?m.Z.locals:void 0},379:t=>{var e=[];function i(t){for(var i=-1,n=0;n<e.length;n++)if(e[n].identifier===t){i=n;break}return i}function n(t,n){for(var r={},a=[],s=0;s<t.length;s++){var u=t[s],l=n.base?u[0]+n.base:u[0],c=r[l]||0,h="".concat(l," ").concat(c);r[l]=c+1;var d=i(h),p={css:u[1],media:u[2],sourceMap:u[3]};-1!==d?(e[d].references++,e[d].updater(p)):e.push({identifier:h,updater:o(p,n),references:1}),a.push(h)}return a}function o(t,e){var i=e.domAPI(e);return i.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i.update(t=e)}else i.remove()}}t.exports=function(t,o){var r=n(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<r.length;a++){var s=i(r[a]);e[s].references--}for(var u=n(t,o),l=0;l<r.length;l++){var c=i(r[l]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}r=u}}},569:t=>{var e={};t.exports=function(t,i){var n=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(i)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e),e}},565:(t,e,i)=>{t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var n=i.css,o=i.media,r=i.sourceMap;o?t.setAttribute("media",o):t.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(n,t)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},658:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MOUSESCROLL=e.MOUSEUP=e.MOUSEOUT=e.MOUSEMOVE=e.MOUSEDOWN=e.CLICK=void 0,e.CLICK=Symbol("click"),e.MOUSEDOWN=Symbol("mousedown"),e.MOUSEMOVE=Symbol("mousemove"),e.MOUSEOUT=Symbol("mouseout"),e.MOUSEUP=Symbol("mouseup"),e.MOUSESCROLL=Symbol("mousescroll")},912:function(t,e,i){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(844)),r=document.createElement("div");r.className="chart",document.body.appendChild(r);var a=new o.default(r);a.init([{title:"开始",type:"circle",color:"#21ba45",children:{bottom:[{title:"设置初始值",children:{bottom:[{title:"等待接收数据",children:{bottom:[{title:"N=0?",type:"diamond",color:"#f2711c",children:{bottom:[{title:"接收标志信息",children:{bottom:[{title:"N=1",type:"diamond",color:"#f2711c",children:{bottom:[{title:"显示烟雾"}]}}]}}],right:[{title:"接收浓度值",children:{bottom:[{title:"N=0",type:"diamond",color:"#f2711c",children:{bottom:[{title:"显示一氧化碳"}]}}]}}]}}]}}]}}]}}]),a.addEventListener("click",(function(t){console.log("click e: ",t)}))},844:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=i(72);i(283),e.default=n.Mind},675:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){var i=this;this.node=t,this.modal=e,["left","top","right","bottom"].forEach((function(e){var n=document.createElement("div");n.classList.add("adder-handle","handle-"+e),n.onclick=function(){i.callback(e)},t.appendChild(n)}))}return t.prototype.show=function(t,e,i,n){this.node.style.left=t-i/2+"px",this.node.style.top=e-n/2+"px",this.node.style.width=i+"px",this.node.style.height=n+"px",this.node.style.display="block"},t.prototype.hide=function(){this.node.style.display="none"},t.prototype.addNode=function(t){this.callback=t},t.init=function(e){var i=document.createElement("div");i.style.display="none",i.classList.add("node-adder"),e.appendChild(i);var n=document.createElement("div");return n.style.display="none",n.classList.add("node-modal"),e.appendChild(n),new t(i,n)},t}();e.default=i},123:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e){this.eventType=t,this.callback=e}},72:function(t,e,i){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Mind=void 0;var o=n(i(471)),r=n(i(675)),a=i(402),s=function(){function t(t){this.nodes=[],this.recoverAnimateList=[],this.data=[],this.nodeTree=[],this.space={width:100,height:100},t&&(this.stage2d=new o.default(t))}return t.prototype.init=function(t){var e=this;this.initAdder(),this.initNode(t),this.initPosition(),this.stage2d.addEventListener("click",(function(t){console.log("e",t),t.target?(e.selected=t.target,t.target.actived=!0,e.adder.show(t.target.x+e.stage2d.translateX,t.target.y+e.stage2d.translateY,t.target.width,t.target.height)):e.adder.hide()})),this.render()},t.prototype.createNode=function(t){switch(t){case"rect":return new a.Rect;case"circle":return new a.Circle;case"diamond":return new a.Diamond;default:return new a.Rect}},t.prototype.initNode=function(t){var e=this,i=function(t,n,o){if(!t||t.length<=0)return[];for(var r=[],a=0;a<t.length;a++){var s=t[a],u=e.createNode(s.type);u.stage2d=e.stage2d,u.name=s.title,s.color&&u.initColor(s.color),e.nodes.push(u),n&&u.links.push({orient:o,node:n});var l=void 0,c=void 0,h=void 0,d=void 0;s.children&&(l=i(s.children.top,u,"top"),c=i(s.children.right,u,"right"),h=i(s.children.bottom,u,"bottom"),d=i(s.children.left,u,"left"));var p={node:u,spaceWidth:0,spaceHeight:0};(d||c||l||h)&&Object.defineProperty(p,"children",{enumerable:!0,writable:!0,configurable:!0,value:{top:l,right:c,bottom:h,left:d}}),r.push(p)}return r};this.nodeTree=i(t,null,"")},t.prototype.initPosition=function(){var t=100,e=100,i=function(n,o){for(var r=0,a=0,s=0;s<n.length;s++){var u=n[s];if(u.spaceWidth=t,u.spaceHeight=e,u.children){var l=i(u.children.top,!0),c=i(u.children.right,!1),h=i(u.children.bottom,!0),d=i(u.children.left,!1);u.spaceWidth+=Math.max(d.width+c.width,l.width-t,h.width-t),u.spaceHeight+=Math.max(l.height+h.height,d.height-e,c.height-e)}o?(console.log(u.node.name,r,a,n),r+=u.spaceWidth,a=Math.max(u.spaceHeight,a)):(r=Math.max(u.spaceWidth,r),a+=u.spaceHeight)}return{width:r,height:a}},n=i(this.nodeTree,!0);0===this.stage2d.translateX&&0===this.stage2d.translateY&&this.stage2d.initTranslate(n.width,n.height),console.log("rect",n);var o=function(i,n,r,a){for(var s=n,u=r,l=0;l<i.length;l++){var c=i[l];if(a?(c.node.x=s+c.spaceWidth/2,c.node.y=u):(c.node.x=s,c.node.y=u+c.spaceHeight/2),c.children){var h=c.children.top.reduce((function(t,e){return t+e.spaceWidth}),0),d=c.children.bottom.reduce((function(t,e){return t+e.spaceWidth}),0),p=c.children.left.reduce((function(t,e){return Math.max(t,e.spaceWidth)}),0),f=c.children.left.reduce((function(t,e){return t+e.spaceHeight}),0),m=c.children.right.reduce((function(t,e){return t+e.spaceHeight}),0);p>0&&a&&(c.node.x=s+p+50),o(c.children.top,c.node.x-h/2,c.node.y-e,!0),o(c.children.right,c.node.x+t,c.node.y-m/2,!1),o(c.children.bottom,c.node.x-d/2,c.node.y+e,!0),o(c.children.left,c.node.x-t,c.node.y-f/2,!1)}a?s+=c.spaceWidth:u+=c.spaceHeight}};o(this.nodeTree,0,0,!0)},t.prototype.render=function(){var t=this,e=this.stage2d.getScene();e.initContext(),e.paint((function(){e.context.beginPath(),e.context.moveTo(0,0),t.nodes.forEach((function(i){i.links.length>0&&i.links.forEach((function(n){t.paintLine(e.context,n.orient,n.node,i)}))})),e.context.moveTo(0,0),e.context.closePath(),e.context.strokeStyle="#999",e.context.lineWidth=1,e.context.stroke(),e.context.lineWidth=1,t.nodes.forEach((function(t){t.paint(e.context)})),e.context.fillStyle="#333",t.nodes.forEach((function(t){t.paintTitle(e.context)}))}))},t.prototype.paintLine=function(t,e,i,n){if("bottom"===e){var o=i.x,r=i.y+i.height/2+2,a=n.x,s=n.y-n.height/2-2;t.moveTo(o,r),t.bezierCurveTo(o,r+(s-r)/2,a,s-(s-r)/2,a,s)}"top"===e&&(o=i.x,r=i.y-i.height/2-2,a=n.x,s=n.y+n.height/2+2,t.moveTo(o,r),t.bezierCurveTo(o,r+(s-r)/2,a,s-(s-r)/2,a,s)),"right"===e&&(o=i.x+i.width/2+2,r=i.y,a=n.x-n.width/2-2,s=n.y,t.moveTo(o,r),t.bezierCurveTo(o+(a-o)/2,r,a-(a-o)/2,s,a,s)),"left"===e&&(o=i.x-i.width/2-2,r=i.y,a=n.x+n.width/2+2,s=n.y,t.moveTo(o,r),t.bezierCurveTo(o+(a-o)/2,r,a-(a-o)/2,s,a,s))},t.prototype.initAdder=function(){var t=this;this.adder=r.default.init(this.stage2d.container),this.adder.addNode((function(e){console.log("this.selected",t.selected)}))},t.prototype.addEventListener=function(t,e){this.stage2d.addEventListener(t,e)},t}();e.Mind=s},242:function(t,e,i){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){var e=t.call(this)||this;return e.radius=6,e.width=60,e.height=60,e.type="circle",e}return o(e,t),e.prototype.clickAnimate=function(){},e.prototype.paintTitle=function(t){t.fillText(this.name,this.x,this.y)},e.prototype.paint=function(t){this.width<2*this.radius&&(this.radius=this.width/2),this.height<2*this.radius&&(this.radius=this.height/2),this.x,this.width,this.y,this.height,t.beginPath(),t.arc(this.x,this.y,this.width/2,0,2*Math.PI),t.closePath(),t.isPointInPath(this.stage2d.mouseX,this.stage2d.mouseY)?(t.fillStyle=this.mouseOverPattern,this.triggerEvent()):t.fillStyle=this.pattern,t.fillStyle=this.areaPattern,t.strokeStyle=this.pattern,t.fill(),t.stroke()},e}(r(i(91)).default);e.default=a},889:function(t,e,i){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){var e=t.call(this)||this;return e.radius=6,e.type="diamond",e}return o(e,t),e.prototype.clickAnimate=function(){},e.prototype.paintTitle=function(t){t.fillText(this.name,this.x,this.y)},e.prototype.paint=function(t){t.beginPath(),t.moveTo(this.x,this.y-this.height/2),t.lineTo(this.x+this.width/2,this.y),t.lineTo(this.x,this.y+this.height/2),t.lineTo(this.x-this.width/2,this.y),t.closePath(),t.isPointInPath(this.stage2d.mouseX,this.stage2d.mouseY)?(t.fillStyle=this.mouseOverPattern,this.triggerEvent()):t.fillStyle=this.pattern,t.fillStyle=this.areaPattern,t.strokeStyle=this.pattern,t.fill(),t.stroke()},e}(r(i(91)).default);e.default=a},402:function(t,e,i){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Diamond=e.Circle=e.Rect=void 0;var o=n(i(567));e.Rect=o.default;var r=n(i(242));e.Circle=r.default;var a=n(i(889));e.Diamond=a.default},91:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=i(494),o=i(658),r=n.lighten("#2185d0",100),a=n.lighten("#2185d0",120),s=function(){function t(){this.x=0,this.y=0,this.width=80,this.height=32,this.name="",this.pattern="#2185d0",this.mouseOverPattern=r,this.areaPattern=a,this.actived=!1,this.disabled=!1,this.recoverAnimateIng=!1,this.links=[]}return t.prototype.clickAnimate=function(){},t.prototype.easeOut=function(t,e,i,n){return-i*(t/=n)*(t-2)+e},t.prototype.animate=function(t,e){var i=this;void 0===e&&(e=400);var n={},o={};for(var r in t)"eAngle"===r?(n[r]=100*this[r],o[r]=100*t[r]-n[r]):(n[r]=this[r],o[r]=t[r]-this[r]);var a=0,s=e/1e3,u=function(){for(var t in(a+=i.stage2d.interval)>e&&(a=e),o)i[t]="eAngle"===t?i.easeOut(a/1e3,n[t],o[t],s)/100:i.easeOut(a/1e3,n[t],o[t],s);a<e&&requestAnimationFrame(u)};requestAnimationFrame(u)},t.prototype.triggerEvent=function(){var t=this,e=this.stage2d.events;e.length>0&&e.forEach((function(e,i){switch(e.eventType){case o.CLICK:var n=t.stage2d.clickPointQueue;n.isEmpty()||(n.dequeue(),e.callback(t.getStageEvent()),t.recoverAnimateIng?t.recoverAnimateIng=!1:t.clickAnimate());break;case o.MOUSEMOVE:var r=t.stage2d.mousemovePointQueue;r.isEmpty()||(r.clear(),e.callback(t.getStageEvent()))}}))},t.prototype.initColor=function(t){/^#([a-fA-F\d]{6}|[a-fA-F\d]{3})$/.test(t)?(this.pattern=t,this.mouseOverPattern=n.lighten(t),this.areaPattern=n.lighten(t,50)):console.error("Only hex colors are supported")},t.prototype.getStageEvent=function(){return{mouseX:Math.round(this.stage2d.mouseX/this.stage2d.pixelRatio),mouseY:Math.round(this.stage2d.mouseY/this.stage2d.pixelRatio),pageX:this.stage2d.pageX,pageY:this.stage2d.pageY,target:this}},t}();e.default=s},567:function(t,e,i){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){var e=t.call(this)||this;return e.radius=6,e.type="rect",e}return o(e,t),e.prototype.clickAnimate=function(){},e.prototype.paintTitle=function(t){t.fillText(this.name,this.x,this.y)},e.prototype.paint=function(t){this.width<2*this.radius&&(this.radius=this.width/2),this.height<2*this.radius&&(this.radius=this.height/2);var e=this.x-this.width/2,i=this.y-this.height/2;t.beginPath(),t.moveTo(e+this.radius,i),t.arcTo(e+this.width,i,e+this.width,i+this.height,this.radius),t.arcTo(e+this.width,i+this.height,e,i+this.height,this.radius),t.arcTo(e,i+this.height,e,i,this.radius),t.arcTo(e,i,e+this.width,i,this.radius),t.closePath(),t.isPointInPath(this.stage2d.mouseX,this.stage2d.mouseY)?(t.fillStyle=this.mouseOverPattern,this.triggerEvent()):t.fillStyle=this.pattern,t.fillStyle=this.areaPattern,t.strokeStyle=this.pattern,t.fill(),t.stroke()},e}(r(i(91)).default);e.default=a},655:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e){this.x=t,this.y=e}},137:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.items=[]}return t.prototype.enqueue=function(t){this.items.push(t)},t.prototype.dequeue=function(){return this.items.shift()},t.prototype.front=function(){return this.items[0]},t.prototype.isEmpty=function(){return 0==this.items.length},t.prototype.size=function(){return this.items.length},t.prototype.clear=function(){this.items=[]},t}();e.default=i},475:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.stage2d=t;var e=document.createElement("canvas");e.width=t.width,e.height=t.height,e.style.position="absolute",this.stage2d.container.appendChild(e);var i=e.getContext("2d");i&&(this.context=i)}return t.prototype.initContext=function(){this.context.strokeStyle="#ffffff",this.context.lineJoin="bevel",this.context.lineCap="round",this.context.miterLimit=1,this.context.textAlign="center",this.context.textBaseline="middle",this.context.fillStyle="#ffffff"},t.prototype.paint=function(t){var e=this,i=function(){if(e.stage2d.isVisibility){var n=e.stage2d,o=n.width,r=n.height,a=n.translateX,s=n.translateY,u=n.scale;e.context.clearRect(0,0,o,r),e.context.globalAlpha=1,e.context.save(),e.context.translate(a,s),e.context.scale(u,u),t(e.context),e.context.restore(),e.stage2d.clearEventPoint()}requestAnimationFrame(i)};requestAnimationFrame(i)},t.prototype.paintGrid=function(){this.context.fillStyle="rgba(0, 0, 0, 0.05)";for(var t=-10;t<10;t++)for(var e=-10;e<10;e++)this.context.fillRect(200*e,200*t,100,100);for(t=-10;t<10;t++)for(e=-10;e<10;e++)this.context.fillRect(200*e+100,200*t+100,100,100);this.context.fillStyle="red",this.context.fillRect(-1,-1,2,2)},t.prototype.paintOnce=function(t){var e=this;requestAnimationFrame((function(){if(e.stage2d.isVisibility){var i=e.stage2d,n=i.width,o=i.height,r=i.translateX,a=i.translateY,s=i.scale;e.context.clearRect(0,0,n,o),e.context.globalAlpha=1,e.context.save(),e.context.translate(r,a),e.context.scale(s,s),t(e.context),e.context.restore()}}))},t}();e.default=i},471:function(t,e,i){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(137)),r=n(i(475)),a=n(i(655)),s=n(i(123)),u=i(658),l=i(494),c=0,h=function(){function t(t){var e=this;this.scenes=[],this.scale=1,this.translateX=0,this.translateY=0,this.drawing=!1,this.pixelRatio=1,this.mouseX=0,this.mouseY=0,this.pageX=0,this.pageY=0,this.interval=0,this.isVisibility=!0,this.clickPointQueue=new o.default,this.mouseupPointQueue=new o.default,this.mousedownPointQueue=new o.default,this.mousemovePointQueue=new o.default,this.container=t,this.width=t.clientWidth,this.height=t.clientHeight,this.container.style.position="relative";var i=t.getBoundingClientRect();this.offsetX=i.x,this.offsetY=i.y;var n=document.createElement("canvas").getContext("2d");n&&this.setPixelRatio(n),this.events=[],this.initEventListener(),document.addEventListener("visibilitychange",(function(){e.isVisibility="visible"===document.visibilityState})),this.requestAnimationFrame();var r=0,a=0;this.addEventListener("mousedown",(function(t){console.log("e, this.drawing",t,e.drawing),t.target||(e.drawing=!0,e.container.style.cursor="grab",r=t.mouseX,a=t.mouseY)})),this.addEventListener("mouseup",(function(t){t.target||(e.drawing=!1,e.container.style.cursor="auto",localStorage.setItem("translateX",e.translateX.toString()),localStorage.setItem("translateY",e.translateY.toString())),console.log("e, this.drawing",t,e.drawing)})),this.addEventListener("mousemove",(function(t){e.drawing&&(e.translateX=e.translateX+(t.mouseX-r),e.translateY=e.translateY+(t.mouseY-a)),r=t.mouseX,a=t.mouseY}))}return t.prototype.initTranslate=function(t,e){this.translateX=this.width/2-t/2,this.translateY=this.height/2-e/2},t.prototype.initEventListener=function(){var t=this;document.addEventListener("mouseup",(function(e){t.mouseupPointQueue.enqueue(new a.default(t.mouseX,t.mouseY))}),!1),this.container.addEventListener("mousedown",(function(e){t.mousedownPointQueue.enqueue(new a.default(t.mouseX,t.mouseY))}),!1),this.container.addEventListener("click",(function(e){t.clickPointQueue.enqueue(new a.default(t.mouseX,t.mouseY))}),!1),this.container.addEventListener("mousemove",(function(e){t.pageX=e.pageX,t.pageY=e.pageY,t.mouseX=(e.pageX-t.offsetX)*t.pixelRatio,t.mouseY=(e.pageY-t.offsetY)*t.pixelRatio,t.mousemovePointQueue.enqueue(new a.default(t.mouseX,t.mouseY))}),!1),this.container.addEventListener("DOMMouseScroll",(function(t){}),!1)},t.prototype.getScene=function(){var t=new r.default(this);return this.scenes.push(t),t},t.prototype.setPixelRatio=function(t){this.pixelRatio=l.getPixelRatio(t)},t.prototype.addEventListener=function(t,e){var i;switch(t){case"click":i=u.CLICK;break;case"mouseup":i=u.MOUSEUP;break;case"mousedown":i=u.MOUSEDOWN;break;case"mousemove":i=u.MOUSEMOVE;break;case"mouseout":i=u.MOUSEOUT;break;case"DOMMouseScroll":i=u.MOUSESCROLL;break;default:i=u.CLICK}this.events.push(new s.default(i,e))},t.prototype.clearEventPoint=function(){var t=this;this.mouseupPointQueue.isEmpty()||(this.events.forEach((function(e){e.eventType===u.MOUSEUP&&e.callback({mouseX:Math.round(t.mouseX/t.pixelRatio),mouseY:Math.round(t.mouseY/t.pixelRatio),pageX:t.pageX,pageY:t.pageY,target:null})})),this.mouseupPointQueue.clear()),this.mousedownPointQueue.isEmpty()||(this.events.forEach((function(e){e.eventType===u.MOUSEDOWN&&e.callback({mouseX:Math.round(t.mouseX/t.pixelRatio),mouseY:Math.round(t.mouseY/t.pixelRatio),pageX:t.pageX,pageY:t.pageY,target:null})})),this.mousedownPointQueue.clear()),this.mousemovePointQueue.isEmpty()||(console.log("1",1),this.events.forEach((function(e){e.eventType===u.MOUSEMOVE&&e.callback({mouseX:Math.round(t.mouseX/t.pixelRatio),mouseY:Math.round(t.mouseY/t.pixelRatio),pageX:t.pageX,pageY:t.pageY,target:null})})),this.mousemovePointQueue.clear()),this.clickPointQueue.isEmpty()||(this.events.forEach((function(e){e.eventType===u.CLICK&&e.callback({mouseX:Math.round(t.mouseX/t.pixelRatio),mouseY:Math.round(t.mouseY/t.pixelRatio),pageX:t.pageX,pageY:t.pageY,target:null})})),this.clickPointQueue.clear())},t.prototype.requestAnimationFrame=function(){var t=this,e=function(i){t.interval=i-c,c=i,requestAnimationFrame(e)};requestAnimationFrame(e)},t}();e.default=h},494:(t,e)=>{function i(t,e,i){var n=(t<<16|e<<8|i).toString(16);return"#"+new Array(Math.abs(n.length-7)).join("0")+n}function n(t){for(var e=[],i=1;i<7;i+=2)e.push(parseInt("0x"+t.slice(i,i+2),16));return e}Object.defineProperty(e,"__esModule",{value:!0}),e.getPixelRatio=e.alpha=e.darken=e.lighten=void 0,e.lighten=function(t,e){void 0===e&&(e=10);var o=n(t).map((function(t){return Math.min(t+e,255)}));return i(o[0],o[1],o[2])},e.darken=function(t,e){void 0===e&&(e=10);var o=n(t).map((function(t){return Math.max(t-e,0)}));return i(o[0],o[1],o[2])},e.alpha=function(t,e){var i=n(t);return"rgba("+i[0]+", "+i[1]+", "+i[2]+", "+e+")"},e.getPixelRatio=function(t){return(window.devicePixelRatio||1)/1}}},e={};function i(n){var o=e[n];if(void 0!==o)return o.exports;var r=e[n]={id:n,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.exports}return i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i(912)})()}));